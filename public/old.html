<!DOCTYPE html>
<html lang="en" class="dark-mode-transition">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Epilepsy Competitor Intelligence - Marcomm Platform</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lodash.js/4.17.21/lodash.min.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" rel="stylesheet">
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        'marcomm': {
                            'orange': '#FF6B35',
                            'orange-light': '#FF8B5F',
                            'orange-dark': '#E55A24',
                            'dark': '#1F2A44',
                            'gray': '#F5F7FA',
                            'gray-dark': '#1E293B',
                            'blue': '#3B82F6',
                            'blue-dark': '#2563EB',
                            'green': '#10B981',
                            'green-light': '#34D399',
                            'red': '#EF4444',
                            'yellow': '#F59E0B'
                        }
                    },
                    fontFamily: {
                        'sans': ['Inter', 'sans-serif']
                    },
                    screens: {
                        '3xl': '1920px',
                    },
                }
            }
        }
    </script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        
        .dark-mode-transition {
            transition: background-color 0.3s ease, color 0.3s ease;
        }
        
        .table-responsive {
            overflow-x: auto;
        }
        
        .modal-content {
            max-height: 70vh;
            overflow-y: auto;
        }
        
        .grid-auto-rows {
            grid-auto-rows: minmax(min-content, max-content);
        }
        
        .animate-pulse {
            animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }
        
        @keyframes pulse {
            0%, 100% {
                opacity: 1;
            }
            50% {
                opacity: .5;
            }
        }
        
        .sankey-node rect {
            cursor: move;
            fill-opacity: .9;
            shape-rendering: crispEdges;
        }
        
        .sankey-node text {
            pointer-events: none;
            text-shadow: 0 1px 0 #fff;
        }
        
        .sankey-link {
            fill: none;
            stroke: #000;
            stroke-opacity: .2;
        }
        
        .sankey-link:hover {
            stroke-opacity: .5;
        }
    </style>
</head>
<body class="bg-marcomm-gray dark:bg-marcomm-dark font-sans text-gray-900 dark:text-gray-100">
    <!-- Navigation -->
    <nav class="bg-white dark:bg-marcomm-gray-dark shadow-lg sticky top-0 z-10">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <div class="flex items-center">
                    <img src="https://hebbkx1anhila5yf.public.blob.vercel-storage.com/GreyTextno-outlineTM+2-dR9GD3ivT092LbXgN7D7iO44je85uD.png" alt="MARCOMM" class="h-8 w-auto">
                    <div class="ml-6 flex space-x-4">
                        <a href="#" class="text-marcomm-dark dark:text-white bg-marcomm-orange/10 dark:bg-marcomm-orange/20 px-3 py-2 rounded-md text-sm font-medium hover:bg-marcomm-orange/20">Epilepsy Dashboard</a>
                        <a href="#" class="text-gray-600 dark:text-gray-300 px-3 py-2 rounded-md text-sm font-medium hover:text-marcomm-orange">Intelligence Hub</a>
                        <a href="#" class="text-gray-600 dark:text-gray-300 px-3 py-2 rounded-md text-sm font-medium hover:text-marcomm-orange">Custom Reports</a>
                    </div>
                </div>
                <div class="flex items-center space-x-4">
                    <div class="relative">
                        <button id="notifications-btn" class="p-2 rounded-full text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-marcomm-gray transition-colors">
                            <i class="fas fa-bell"></i>
                            <span class="absolute top-0 right-0 block h-2 w-2 rounded-full bg-marcomm-red"></span>
                        </button>
                    </div>
                    <div>
                        <button id="download-report" class="px-3 py-1.5 bg-marcomm-blue text-white rounded-md text-sm hover:bg-marcomm-blue-dark transition-colors">
                            <i class="fas fa-download mr-1"></i> Export Report
                        </button>
                    </div>
                    <button id="dark-mode-toggle" class="p-2 rounded-full text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-marcomm-gray transition-colors">
                        <i class="fas fa-moon dark:hidden"></i>
                        <i class="fas fa-sun hidden dark:block"></i>
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <div class="bg-white dark:bg-marcomm-gray-dark rounded-xl shadow-md p-6 mb-8">
            <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center mb-4">
                <div class="flex items-center space-x-4">
                    <h1 class="text-2xl sm:text-3xl font-semibold text-marcomm-dark dark:text-white">Epilepsy Market Intelligence</h1>
                    <span class="px-3 py-1 bg-marcomm-blue/10 text-marcomm-blue dark:bg-marcomm-blue/20 dark:text-marcomm-blue-dark rounded-full text-sm">Healthcare</span>
                </div>
                <p class="mt-2 sm:mt-0 text-gray-600 dark:text-gray-400 text-sm">Comprehensive competitor dashboard for epilepsy treatments - Updated March 17, 2025</p>
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                <div class="relative p-4 border border-gray-200 dark:border-gray-700 rounded-lg bg-white/50 dark:bg-gray-800/50">
                    <div class="flex items-center">
                        <div class="flex-shrink-0 w-12 h-12 rounded-full bg-marcomm-orange/20 flex items-center justify-center">
                            <i class="fas fa-pills text-marcomm-orange text-xl"></i>
                        </div>
                        <div class="ml-3">
                            <h3 class="text-lg font-medium text-gray-900 dark:text-gray-100">Drug Market</h3>
                            <p class="text-2xl font-semibold">$3.5B</p>
                        </div>
                    </div>
                    <div class="mt-2">
                        <span class="text-sm text-green-600 dark:text-green-400">
                            <i class="fas fa-arrow-up mr-1"></i> 4.2% YoY
                        </span>
                    </div>
                </div>
                
                <div class="relative p-4 border border-gray-200 dark:border-gray-700 rounded-lg bg-white/50 dark:bg-gray-800/50">
                    <div class="flex items-center">
                        <div class="flex-shrink-0 w-12 h-12 rounded-full bg-marcomm-blue/20 flex items-center justify-center">
                            <i class="fas fa-microchip text-marcomm-blue text-xl"></i>
                        </div>
                        <div class="ml-3">
                            <h3 class="text-lg font-medium text-gray-900 dark:text-gray-100">Device Market</h3>
                            <p class="text-2xl font-semibold">$1.2B</p>
                        </div>
                    </div>
                    <div class="mt-2">
                        <span class="text-sm text-green-600 dark:text-green-400">
                            <i class="fas fa-arrow-up mr-1"></i> 8.1% YoY
                        </span>
                    </div>
                </div>
                
                <div class="relative p-4 border border-gray-200 dark:border-gray-700 rounded-lg bg-white/50 dark:bg-gray-800/50">
                    <div class="flex items-center">
                        <div class="flex-shrink-0 w-12 h-12 rounded-full bg-marcomm-green/20 flex items-center justify-center">
                            <i class="fas fa-user-md text-marcomm-green text-xl"></i>
                        </div>
                        <div class="ml-3">
                            <h3 class="text-lg font-medium text-gray-900 dark:text-gray-100">Refractory Patients</h3>
                            <p class="text-2xl font-semibold">~1.5M</p>
                        </div>
                    </div>
                    <div class="mt-2">
                        <span class="text-sm text-red-600 dark:text-red-400">
                            <i class="fas fa-arrow-up mr-1"></i> 2.1% YoY
                        </span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Filters -->
        <div class="bg-white dark:bg-marcomm-gray-dark rounded-xl shadow-md p-4 mb-6">
            <div class="flex flex-wrap gap-4 items-center">
                <div>
                    <label class="text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 block">Time Period</label>
                    <select class="filter-select bg-white dark:bg-marcomm-gray-dark border border-gray-300 dark:border-gray-600 rounded-md py-1.5 px-3 text-sm">
                        <option value="1y">Last 1 Year</option>
                        <option value="2y">Last 2 Years</option>
                        <option value="5y" selected>Last 5 Years</option>
                        <option value="all">All Time</option>
                    </select>
                </div>
                
                <div>
                    <label class="text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 block">Data Source</label>
                    <select class="filter-select bg-white dark:bg-marcomm-gray-dark border border-gray-300 dark:border-gray-600 rounded-md py-1.5 px-3 text-sm">
                        <option value="all" selected>All Sources</option>
                        <option value="medicare">Medicare Only</option>
                        <option value="private">Private Insurance</option>
                        <option value="fda">FDA</option>
                    </select>
                </div>
                
                <div>
                    <label class="text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 block">Patient Type</label>
                    <select class="filter-select bg-white dark:bg-marcomm-gray-dark border border-gray-300 dark:border-gray-600 rounded-md py-1.5 px-3 text-sm">
                        <option value="all" selected>All Patients</option>
                        <option value="refractory">Refractory Only</option>
                        <option value="new">Newly Diagnosed</option>
                        <option value="pediatric">Pediatric</option>
                    </select>
                </div>
                
                <div>
                    <label class="text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 block">Region</label>
                    <select class="filter-select bg-white dark:bg-marcomm-gray-dark border border-gray-300 dark:border-gray-600 rounded-md py-1.5 px-3 text-sm">
                        <option value="usa" selected>United States</option>
                        <option value="eu">European Union</option>
                        <option value="global">Global</option>
                    </select>
                </div>
                
                <div class="ml-auto">
                    <button id="reset-filters" class="bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 px-3 py-1.5 rounded-md text-sm hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors">
                        <i class="fas fa-sync-alt mr-1"></i> Reset
                    </button>
                    <button id="apply-filters" class="bg-marcomm-orange text-white px-3 py-1.5 rounded-md text-sm hover:bg-marcomm-orange-dark transition-colors ml-2">
                        <i class="fas fa-filter mr-1"></i> Apply Filters
                    </button>
                </div>
            </div>
        </div>

        <!-- Patient Journey -->
        <div class="bg-white dark:bg-marcomm-gray-dark rounded-xl shadow-md overflow-hidden mb-8">
            <div class="border-b border-gray-200 dark:border-gray-700 px-6 py-4">
                <h2 class="text-xl font-semibold text-marcomm-dark dark:text-white">Patient Journey & Treatment Flow</h2>
                <p class="text-sm text-gray-600 dark:text-gray-400 mt-1">Comprehensive view of epilepsy patient flow through the healthcare system</p>
            </div>
            
            <div class="p-6">
                <div class="w-full h-72" id="patient-journey-diagram"></div>
            </div>
            
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 p-6 pt-0">
                <div class="bg-marcomm-orange/10 dark:bg-marcomm-orange/5 rounded-lg p-4">
                    <h4 class="font-medium text-marcomm-orange">Newly Diagnosed</h4>
                    <p class="text-3xl font-bold mt-2">150,000</p>
                    <p class="text-sm text-gray-600 dark:text-gray-400">Annual new epilepsy diagnoses</p>
                    <div class="mt-4 space-y-2">
                        <div class="flex justify-between items-center">
                            <span class="text-sm">Adult (18+)</span>
                            <span class="text-sm font-medium">72%</span>
                        </div>
                        <div class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-1.5">
                            <div class="bg-marcomm-orange h-1.5 rounded-full" style="width: 72%"></div>
                        </div>
                        
                        <div class="flex justify-between items-center">
                            <span class="text-sm">Pediatric</span>
                            <span class="text-sm font-medium">28%</span>
                        </div>
                        <div class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-1.5">
                            <div class="bg-marcomm-orange h-1.5 rounded-full" style="width: 28%"></div>
                        </div>
                    </div>
                </div>
                
                <div class="bg-marcomm-blue/10 dark:bg-marcomm-blue/5 rounded-lg p-4">
                    <h4 class="font-medium text-marcomm-blue">Medication Treatment</h4>
                    <p class="text-3xl font-bold mt-2">85%</p>
                    <p class="text-sm text-gray-600 dark:text-gray-400">Patients starting with AEDs only</p>
                    <div class="mt-4 space-y-2">
                        <div class="flex justify-between items-center">
                            <span class="text-sm">Monotherapy</span>
                            <span class="text-sm font-medium">60%</span>
                        </div>
                        <div class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-1.5">
                            <div class="bg-marcomm-blue h-1.5 rounded-full" style="width: 60%"></div>
                        </div>
                        
                        <div class="flex justify-between items-center">
                            <span class="text-sm">Polytherapy</span>
                            <span class="text-sm font-medium">40%</span>
                        </div>
                        <div class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-1.5">
                            <div class="bg-marcomm-blue h-1.5 rounded-full" style="width: 40%"></div>
                        </div>
                    </div>
                </div>
                
                <div class="bg-marcomm-green/10 dark:bg-marcomm-green/5 rounded-lg p-4">
                    <h4 class="font-medium text-marcomm-green">Refractory Patients</h4>
                    <p class="text-3xl font-bold mt-2">30%</p>
                    <p class="text-sm text-gray-600 dark:text-gray-400">Patients with inadequate response</p>
                    <div class="mt-4 space-y-2">
                        <div class="flex justify-between items-center">
                            <span class="text-sm">Advanced Device Eligible</span>
                            <span class="text-sm font-medium">45%</span>
                        </div>
                        <div class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-1.5">
                            <div class="bg-marcomm-green h-1.5 rounded-full" style="width: 45%"></div>
                        </div>
                        
                        <div class="flex justify-between items-center">
                            <span class="text-sm">Receiving Device Therapy</span>
                            <span class="text-sm font-medium">15%</span>
                        </div>
                        <div class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-1.5">
                            <div class="bg-marcomm-green h-1.5 rounded-full" style="width: 15%"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Tabs -->
        <div class="bg-white dark:bg-marcomm-gray-dark rounded-xl shadow-md overflow-hidden">
            <div class="border-b border-gray-200 dark:border-marcomm-dark">
                <nav class="flex space-x-1 p-4 overflow-x-auto" aria-label="Tabs">
                    <button class="tab-button flex-shrink-0 px-4 py-2 text-marcomm-orange border-b-2 border-marcomm-orange font-semibold text-sm transition-colors" data-tab="drug-competitors">Drug Competitors</button>
                    <button class="tab-button flex-shrink-0 px-4 py-2 text-gray-500 dark:text-gray-400 hover:text-marcomm-orange dark:hover:text-marcomm-orange-light border-b-2 border-transparent font-semibold text-sm transition-colors" data-tab="device-competitors">Device Competitors</button>
                    <button class="tab-button flex-shrink-0 px-4 py-2 text-gray-500 dark:text-gray-400 hover:text-marcomm-orange dark:hover:text-marcomm-orange-light border-b-2 border-transparent font-semibold text-sm transition-colors" data-tab="early-stage">Early-Stage Companies</button>
                    <button class="tab-button flex-shrink-0 px-4 py-2 text-gray-500 dark:text-gray-400 hover:text-marcomm-orange dark:hover:text-marcomm-orange-light border-b-2 border-transparent font-semibold text-sm transition-colors" data-tab="market-overview">Market Overview</button>
                    <button class="tab-button flex-shrink-0 px-4 py-2 text-gray-500 dark:text-gray-400 hover:text-marcomm-orange dark:hover:text-marcomm-orange-light border-b-2 border-transparent font-semibold text-sm transition-colors" data-tab="patient-tracking">Patient Tracking</button>
                    <button class="tab-button flex-shrink-0 px-4 py-2 text-gray-500 dark:text-gray-400 hover:text-marcomm-orange dark:hover:text-marcomm-orange-light border-b-2 border-transparent font-semibold text-sm transition-colors" data-tab="medicare-claims">Medicare Claims</button>
                </nav>
            </div>

            <!-- Tab Contents -->
            <div class="p-6">
                <!-- Drug Competitors -->
                <div id="drug-competitors" class="tab-content space-y-6">
                    <div class="flex flex-col md:flex-row justify-between mb-4">
                        <h3 class="text-xl font-semibold text-marcomm-dark dark:text-white mb-2 md:mb-0">Top AED Competitors</h3>
                        <div class="flex space-x-2">
                            <button class="flex items-center px-3 py-1.5 bg-gray-100 dark:bg-gray-700 rounded-md text-sm hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors">
                                <i class="fas fa-bell mr-1.5"></i> Set Alert
                            </button>
                            <button class="flex items-center px-3 py-1.5 bg-marcomm-blue text-white rounded-md text-sm hover:bg-marcomm-blue-dark transition-colors">
                                <i class="fas fa-file-download mr-1.5"></i> Export
                            </button>
                        </div>
                    </div>
                
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6" id="drug-metrics">
                        <!-- Will be populated by JavaScript -->
                    </div>
                    
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                        <div class="bg-white dark:bg-marcomm-gray-dark rounded-lg shadow-sm p-4">
                            <div class="flex justify-between items-center mb-4">
                                <h4 class="text-lg font-semibold text-marcomm-dark dark:text-white">FDA Approvals</h4>
                                <div>
                                    <button class="text-xs px-2 py-1 bg-gray-100 dark:bg-gray-700 rounded text-gray-800 dark:text-gray-200">
                                        <i class="fas fa-info-circle mr-1"></i> Info
                                    </button>
                                </div>
                            </div>
                            <div class="table-responsive">
                                <table class="min-w-full divide-y divide-gray-200 dark:divide-marcomm-dark">
                                    <thead class="bg-marcomm-gray dark:bg-marcomm-dark">
                                        <tr>
                                            <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase">Company</th>
                                            <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase">Drug</th>
                                            <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase">Date</th>
                                            <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase">Details</th>
                                        </tr>
                                    </thead>
                                    <tbody id="drug-fda-table" class="divide-y divide-gray-200 dark:divide-marcomm-dark">
                                        <!-- Will be populated by JavaScript -->
                                    </tbody>
                                </table>
                            </div>
                            <div class="mt-4 flex justify-between">
                                <button id="drug-fda-prev" class="px-3 py-1 bg-marcomm-blue text-white rounded-md text-sm hover:bg-marcomm-blue-dark">Previous</button>
                                <button id="drug-fda-next" class="px-3 py-1 bg-marcomm-blue text-white rounded-md text-sm hover:bg-marcomm-blue-dark">Next</button>
                            </div>
                        </div>
                        
                        <div class="bg-white dark:bg-marcomm-gray-dark rounded-lg shadow-sm p-4">
                            <div class="flex justify-between items-center mb-4">
                                <h4 class="text-lg font-semibold text-marcomm-dark dark:text-white">AED Prescription Trends</h4>
                                <div class="flex space-x-2">
                                    <button class="text-xs px-2 py-1 bg-gray-100 dark:bg-gray-700 rounded text-gray-800 dark:text-gray-200">Monthly</button>
                                    <button class="text-xs px-2 py-1 bg-marcomm-blue text-white rounded">Yearly</button>
                                </div>
                            </div>
                            <canvas id="aed-trend-chart" height="200"></canvas>
                        </div>
                    </div>
                    
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                        <div class="bg-white dark:bg-marcomm-gray-dark rounded-lg shadow-sm p-4">
                            <h4 class="text-lg font-semibold text-marcomm-dark dark:text-white mb-4">AED Medicare Part D Spending</h4>
                            <canvas id="aed-medicare-spending" height="200"></canvas>
                        </div>
                        
                        <div class="bg-white dark:bg-marcomm-gray-dark rounded-lg shadow-sm p-4">
                            <h4 class="text-lg font-semibold text-marcomm-dark dark:text-white mb-4">Formulary Status Comparison</h4>
                            <div class="table-responsive">
                                <table class="min-w-full divide-y divide-gray-200 dark:divide-marcomm-dark">
                                    <thead class="bg-marcomm-gray dark:bg-marcomm-dark">
                                        <tr>
                                            <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase">Drug</th>
                                            <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase">Manufacturer</th>
                                            <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase">Medicare</th>
                                            <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase">BCBS</th>
                                            <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase">UnitedHealth</th>
                                            <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase">Cigna</th>
                                        </tr>
                                    </thead>
                                    <tbody id="formulary-table" class="divide-y divide-gray-200 dark:divide-marcomm-dark">
                                        <tr class="hover:bg-marcomm-gray dark:hover:bg-marcomm-dark transition-colors">
                                            <td class="px-4 py-3 text-sm font-medium">Keppra (levetiracetam)</td>
                                            <td class="px-4 py-3 text-sm text-gray-600 dark:text-gray-400">UCB</td>
                                            <td class="px-4 py-3">
                                                <span class="inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-green-100 text-green-800 dark:bg-green-800 dark:text-green-100">
                                                    Tier 1
                                                </span>
                                            </td>
                                            <td class="px-4 py-3">
                                                <span class="inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-green-100 text-green-800 dark:bg-green-800 dark:text-green-100">
                                                    Tier 1
                                                </span>
                                            </td>
                                            <td class="px-4 py-3">
                                                <span class="inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-green-100 text-green-800 dark:bg-green-800 dark:text-green-100">
                                                    Tier 1
                                                </span>
                                            </td>
                                            <td class="px-4 py-3">
                                                <span class="inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-green-100 text-green-800 dark:bg-green-800 dark:text-green-100">
                                                    Tier 1
                                                </span>
                                            </td>
                                        </tr>
                                        <tr class="hover:bg-marcomm-gray dark:hover:bg-marcomm-dark transition-colors">
                                            <td class="px-4 py-3 text-sm font-medium">Lamictal (lamotrigine)</td>
                                            <td class="px-4 py-3 text-sm text-gray-600 dark:text-gray-400">GSK</td>
                                            <td class="px-4 py-3">
                                                <span class="inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-800 dark:text-blue-100">
                                                    Tier 2
                                                </span>
                                            </td>
                                            <td class="px-4 py-3">
                                                <span class="inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-green-100 text-green-800 dark:bg-green-800 dark:text-green-100">
                                                    Tier 1
                                                </span>
                                            </td>
                                            <td class="px-4 py-3">
                                                <span class="inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-800 dark:text-blue-100">
                                                    Tier 2
                                                </span>
                                            </td>
                                            <td class="px-4 py-3">
                                                <span class="inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-800 dark:text-blue-100">
                                                    Tier 2
                                                </span>
                                            </td>
                                        </tr>
                                        <tr class="hover:bg-marcomm-gray dark:hover:bg-marcomm-dark transition-colors">
                                            <td class="px-4 py-3 text-sm font-medium">Lyrica (pregabalin)</td>
                                            <td class="px-4 py-3 text-sm text-gray-600 dark:text-gray-400">Pfizer</td>
                                            <td class="px-4 py-3">
                                                <span class="inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-800 dark:text-blue-100">
                                                    Tier 2
                                                </span>
                                            </td>
                                            <td class="px-4 py-3">
                                                <span class="inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-800 dark:text-blue-100">
                                                    Tier 2
                                                </span>
                                            </td>
                                            <td class="px-4 py-3">
                                                <span class="inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-yellow-100 text-yellow-800 dark:bg-yellow-800 dark:text-yellow-100">
                                                    Tier 3
                                                </span>
                                            </td>
                                            <td class="px-4 py-3">
                                                <span class="inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-800 dark:text-blue-100">
                                                    Tier 2
                                                </span>
                                            </td>
                                        </tr>
                                        <tr class="hover:bg-marcomm-gray dark:hover:bg-marcomm-dark transition-colors">
                                            <td class="px-4 py-3 text-sm font-medium">Fycompa (perampanel)</td>
                                            <td class="px-4 py-3 text-sm text-gray-600 dark:text-gray-400">Eisai</td>
                                            <td class="px-4 py-3">
                                                <span class="inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-yellow-100 text-yellow-800 dark:bg-yellow-800 dark:text-yellow-100">
                                                    Tier 3
                                                </span>
                                            </td>
                                            <td class="px-4 py-3">
                                                <span class="inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-yellow-100 text-yellow-800 dark:bg-yellow-800 dark:text-yellow-100">
                                                    Tier 3
                                                </span>
                                            </td>
                                            <td class="px-4 py-3">
                                                <span class="inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-yellow-100 text-yellow-800 dark:bg-yellow-800 dark:text-yellow-100">
                                                    Tier 3
                                                </span>
                                            </td>
                                            <td class="px-4 py-3">
                                                <span class="inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-800 dark:text-blue-100">
                                                    Tier 2
                                                </span>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Device Competitors -->
                <div id="device-competitors" class="tab-content space-y-6 hidden">
                    <div class="flex flex-col md:flex-row justify-between mb-4">
                        <h3 class="text-xl font-semibold text-marcomm-dark dark:text-white mb-2 md:mb-0">Neurostimulation Device Competitors</h3>
                        <div class="flex space-x-2">
                            <button class="flex items-center px-3 py-1.5 bg-gray-100 dark:bg-gray-700 rounded-md text-sm hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors">
                                <i class="fas fa-bell mr-1.5"></i> Set Alert
                            </button>
                            <button class="flex items-center px-3 py-1.5 bg-marcomm-blue text-white rounded-md text-sm hover:bg-marcomm-blue-dark transition-colors">
                                <i class="fas fa-file-download mr-1.5"></i> Export
                            </button>
                        </div>
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                        <div class="bg-white dark:bg-marcomm-gray-dark rounded-lg shadow-sm p-4 border border-gray-200 dark:border-marcomm-dark hover:shadow-md transition-shadow">
                            <div class="flex justify-between">
                                <div>
                                    <h4 class="font-semibold text-marcomm-dark dark:text-white">Medtronic (DBS)</h4>
                                    <p class="text-xl font-medium text-marcomm-orange mt-1">12,000 Implants</p>
                                </div>
                                <div class="w-12 h-12 bg-gray-100 dark:bg-gray-700 rounded-full flex items-center justify-center">
                                    <i class="fas fa-brain text-marcomm-blue text-xl"></i>
                                </div>
                            </div>
                            <div class="mt-4 grid grid-cols-2 gap-2">
                                <div>
                                    <p class="text-xs text-gray-500 dark:text-gray-400">Claims</p>
                                    <p class="text-sm font-medium">8,000</p>
                                </div>
                                <div>
                                    <p class="text-xs text-gray-500 dark:text-gray-400">Market Share</p>
                                    <p class="text-sm font-medium">40%</p>
                                </div>
                                <div>
                                    <p class="text-xs text-gray-500 dark:text-gray-400">Growth YoY</p>
                                    <p class="text-sm font-medium text-green-600">+20%</p>
                                </div>
                                <div>
                                    <p class="text-xs text-gray-500 dark:text-gray-400">Recalls</p>
                                    <p class="text-sm font-medium">15</p>
                                </div>
                            </div>
                            <div class="mt-4">
                                <a href="#" class="text-marcomm-blue text-sm hover:underline">View Full Profile</a>
                            </div>
                        </div>
                        
                        <div class="bg-white dark:bg-marcomm-gray-dark rounded-lg shadow-sm p-4 border border-gray-200 dark:border-marcomm-dark hover:shadow-md transition-shadow">
                            <div class="flex justify-between">
                                <div>
                                    <h4 class="font-semibold text-marcomm-dark dark:text-white">Livanova (VNS)</h4>
                                    <p class="text-xl font-medium text-marcomm-orange mt-1">10,000 Implants</p>
                                </div>
                                <div class="w-12 h-12 bg-gray-100 dark:bg-gray-700 rounded-full flex items-center justify-center">
                                    <i class="fas fa-wave-square text-marcomm-blue text-xl"></i>
                                </div>
                            </div>
                            <div class="mt-4 grid grid-cols-2 gap-2">
                                <div>
                                    <p class="text-xs text-gray-500 dark:text-gray-400">Claims</p>
                                    <p class="text-sm font-medium">6,000</p>
                                </div>
                                <div>
                                    <p class="text-xs text-gray-500 dark:text-gray-400">Market Share</p>
                                    <p class="text-sm font-medium">33%</p>
                                </div>
                                <div>
                                    <p class="text-xs text-gray-500 dark:text-gray-400">Growth YoY</p>
                                    <p class="text-sm font-medium text-green-600">+17.6%</p>
                                </div>
                                <div>
                                    <p class="text-xs text-gray-500 dark:text-gray-400">Recalls</p>
                                    <p class="text-sm font-medium">8</p>
                                </div>
                            </div>
                            <div class="mt-4">
                                <a href="#" class="text-marcomm-blue text-sm hover:underline">View Full Profile</a>
                            </div>
                        </div>
                        
                        <div class="bg-white dark:bg-marcomm-gray-dark rounded-lg shadow-sm p-4 border border-gray-200 dark:border-marcomm-dark hover:shadow-md transition-shadow">
                            <div class="flex justify-between">
                                <div>
                                    <h4 class="font-semibold text-marcomm-dark dark:text-white">Boston Scientific (RNS)</h4>
                                    <p class="text-xl font-medium text-marcomm-orange mt-1">4,000 Implants</p>
                                </div>
                                <div class="w-12 h-12 bg-gray-100 dark:bg-gray-700 rounded-full flex items-center justify-center">
                                    <i class="fas fa-bolt text-marcomm-blue text-xl"></i>
                                </div>
                            </div>
                            <div class="mt-4 grid grid-cols-2 gap-2">
                                <div>
                                    <p class="text-xs text-gray-500 dark:text-gray-400">Claims</p>
                                    <p class="text-sm font-medium">2,500</p>
                                </div>
                                <div>
                                    <p class="text-xs text-gray-500 dark:text-gray-400">Market Share</p>
                                    <p class="text-sm font-medium">15%</p>
                                </div>
                                <div>
                                    <p class="text-xs text-gray-500 dark:text-gray-400">Growth YoY</p>
                                    <p class="text-sm font-medium text-green-600">+33.3%</p>
                                </div>
                                <div>
                                    <p class="text-xs text-gray-500 dark:text-gray-400">Recalls</p>
                                    <p class="text-sm font-medium">5</p>
                                </div>
                            </div>
                            <div class="mt-4">
                                <a href="#" class="text-marcomm-blue text-sm hover:underline">View Full Profile</a>
                            </div>
                        </div>
                    </div>
                    
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                        <div class="bg-white dark:bg-marcomm-gray-dark rounded-lg shadow-sm p-4">
                            <h4 class="text-lg font-semibold text-marcomm-dark dark:text-white mb-4">Device Implant Trends</h4>
                            <canvas id="device-trend-chart" height="200"></canvas>
                        </div>
                        
                        <div class="bg-white dark:bg-marcomm-gray-dark rounded-lg shadow-sm p-4">
                            <div class="flex justify-between items-center mb-4">
                                <h4 class="text-lg font-semibold text-marcomm-dark dark:text-white">CMS Procedure Volumes</h4>
                                <div>
                                    <select class="text-xs px-2 py-1 bg-gray-100 dark:bg-gray-700 rounded border-0">
                                        <option>2024</option>
                                        <option>2023</option>
                                        <option>2022</option>
                                    </select>
                                </div>
                            </div>
                            <div class="table-responsive">
                                <table class="min-w-full divide-y divide-gray-200 dark:divide-marcomm-dark">
                                    <thead class="bg-marcomm-gray dark:bg-marcomm-dark">
                                        <tr>
                                            <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase">Company</th>
                                            <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase">Device</th>
                                            <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase">CPT Code</th>
                                            <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase">Volume</th>
                                            <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase">Details</th>
                                        </tr>
                                    </thead>
                                    <tbody id="device-cms-table" class="divide-y divide-gray-200 dark:divide-marcomm-dark">
                                        <tr class="hover:bg-marcomm-gray dark:hover:bg-marcomm-dark transition-colors">
                                            <td class="px-4 py-3 text-sm text-gray-600 dark:text-gray-400">Medtronic</td>
                                            <td class="px-4 py-3 text-sm text-gray-600 dark:text-gray-400">DBS</td>
                                            <td class="px-4 py-3 text-sm text-gray-600 dark:text-gray-400">61885</td>
                                            <td class="px-4 py-3 text-sm text-gray-600 dark:text-gray-400">8,000</td>
                                            <td class="px-4 py-3 text-sm">
                                                <button class="text-marcomm-orange hover:underline">View</button>
                                            </td>
                                        </tr>
                                        <tr class="hover:bg-marcomm-gray dark:hover:bg-marcomm-dark transition-colors">
                                            <td class="px-4 py-3 text-sm text-gray-600 dark:text-gray-400">Livanova</td>
                                            <td class="px-4 py-3 text-sm text-gray-600 dark:text-gray-400">VNS</td>
                                            <td class="px-4 py-3 text-sm text-gray-600 dark:text-gray-400">64568</td>
                                            <td class="px-4 py-3 text-sm text-gray-600 dark:text-gray-400">6,000</td>
                                            <td class="px-4 py-3 text-sm">
                                                <button class="text-marcomm-orange hover:underline">View</button>
                                            </td>
                                        </tr>
                                        <tr class="hover:bg-marcomm-gray dark:hover:bg-marcomm-dark transition-colors">
                                            <td class="px-4 py-3 text-sm text-gray-600 dark:text-gray-400">Boston Scientific</td>
                                            <td class="px-4 py-3 text-sm text-gray-600 dark:text-gray-400">RNS</td>
                                            <td class="px-4 py-3 text-sm text-gray-600 dark:text-gray-400">61886</td>
                                            <td class="px-4 py-3 text-sm text-gray-600 dark:text-gray-400">2,500</td>
                                            <td class="px-4 py-3 text-sm">
                                                <button class="text-marcomm-orange hover:underline">View</button>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                    
                    <div class="bg-white dark:bg-marcomm-gray-dark rounded-lg shadow-sm p-4">
                        <h4 class="text-lg font-semibold text-marcomm-dark dark:text-white mb-4">Device Patient Outcomes Comparison</h4>
                        <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-4">
                            <div class="bg-gray-50 dark:bg-gray-800 p-4 rounded-lg">
                                <h5 class="text-sm font-medium text-gray-500 dark:text-gray-400 mb-1">Average Seizure Reduction</h5>
                                <div class="grid grid-cols-3 gap-2">
                                    <div class="text-center">
                                        <p class="text-xs text-gray-500 dark:text-gray-400">DBS</p>
                                        <p class="text-lg font-semibold text-marcomm-blue">48%</p>
                                    </div>
                                    <div class="text-center">
                                        <p class="text-xs text-gray-500 dark:text-gray-400">VNS</p>
                                        <p class="text-lg font-semibold text-marcomm-orange">42%</p>
                                    </div>
                                    <div class="text-center">
                                        <p class="text-xs text-gray-500 dark:text-gray-400">RNS</p>
                                        <p class="text-lg font-semibold text-marcomm-green">55%</p>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="bg-gray-50 dark:bg-gray-800 p-4 rounded-lg">
                                <h5 class="text-sm font-medium text-gray-500 dark:text-gray-400 mb-1">Quality of Life Improvement</h5>
                                <div class="grid grid-cols-3 gap-2">
                                    <div class="text-center">
                                        <p class="text-xs text-gray-500 dark:text-gray-400">DBS</p>
                                        <p class="text-lg font-semibold text-marcomm-blue">36%</p>
                                    </div>
                                    <div class="text-center">
                                        <p class="text-xs text-gray-500 dark:text-gray-400">VNS</p>
                                        <p class="text-lg font-semibold text-marcomm-orange">32%</p>
                                    </div>
                                    <div class="text-center">
                                        <p class="text-xs text-gray-500 dark:text-gray-400">RNS</p>
                                        <p class="text-lg font-semibold text-marcomm-green">45%</p>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="bg-gray-50 dark:bg-gray-800 p-4 rounded-lg">
                                <h5 class="text-sm font-medium text-gray-500 dark:text-gray-400 mb-1">Medication Reduction</h5>
                                <div class="grid grid-cols-3 gap-2">
                                    <div class="text-center">
                                        <p class="text-xs text-gray-500 dark:text-gray-400">DBS</p>
                                        <p class="text-lg font-semibold text-marcomm-blue">25%</p>
                                    </div>
                                    <div class="text-center">
                                        <p class="text-xs text-gray-500 dark:text-gray-400">VNS</p>
                                        <p class="text-lg font-semibold text-marcomm-orange">20%</p>
                                    </div>
                                    <div class="text-center">
                                        <p class="text-xs text-gray-500 dark:text-gray-400">RNS</p>
                                        <p class="text-lg font-semibold text-marcomm-green">30%</p>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="bg-gray-50 dark:bg-gray-800 p-4 rounded-lg">
                                <h5 class="text-sm font-medium text-gray-500 dark:text-gray-400 mb-1">Responder Rate (>50% reduction)</h5>
                                <div class="grid grid-cols-3 gap-2">
                                    <div class="text-center">
                                        <p class="text-xs text-gray-500 dark:text-gray-400">DBS</p>
                                        <p class="text-lg font-semibold text-marcomm-blue">45%</p>
                                    </div>
                                    <div class="text-center">
                                        <p class="text-xs text-gray-500 dark:text-gray-400">VNS</p>
                                        <p class="text-lg font-semibold text-marcomm-orange">38%</p>
                                    </div>
                                    <div class="text-center">
                                        <p class="text-xs text-gray-500 dark:text-gray-400">RNS</p>
                                        <p class="text-lg font-semibold text-marcomm-green">60%</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <canvas id="device-outcomes-chart" height="200"></canvas>
                    </div>
                </div>

                <!-- Early-Stage Companies -->
                <div id="early-stage" class="tab-content space-y-6 hidden">
                    <div class="flex flex-col md:flex-row justify-between mb-4">
                        <h3 class="text-xl font-semibold text-marcomm-dark dark:text-white mb-2 md:mb-0">Emerging Competitors</h3>
                        <div class="flex space-x-2">
                            <button class="flex items-center px-3 py-1.5 bg-gray-100 dark:bg-gray-700 rounded-md text-sm hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors">
                                <i class="fas fa-bell mr-1.5"></i> Set Alert
                            </button>
                            <button class="flex items-center px-3 py-1.5 bg-marcomm-blue text-white rounded-md text-sm hover:bg-marcomm-blue-dark transition-colors">
                                <i class="fas fa-file-download mr-1.5"></i> Export
                            </button>
                        </div>
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                        <div class="bg-white dark:bg-marcomm-gray-dark rounded-lg shadow-sm p-4 border border-gray-200 dark:border-marcomm-dark hover:shadow-md transition-shadow relative">
                            <div class="absolute top-2 right-2 bg-marcomm-orange/20 text-marcomm-orange px-2 py-0.5 rounded text-xs font-medium">
                                High Threat
                            </div>
                            <h4 class="font-semibold text-marcomm-dark dark:text-white">NeuroPace</h4>
                            <p class="text-sm text-gray-600 dark:text-gray-400 mt-1">RNS System</p>
                            <div class="mt-4 grid grid-cols-2 gap-2">
                                <div>
                                    <p class="text-xs text-gray-500 dark:text-gray-400">Patents</p>
                                    <p class="text-sm font-medium">15</p>
                                </div>
                                <div>
                                    <p class="text-xs text-gray-500 dark:text-gray-400">Clinical Trials</p>
                                    <p class="text-sm font-medium">2</p>
                                </div>
                                <div>
                                    <p class="text-xs text-gray-500 dark:text-gray-400">Funding</p>
                                    <p class="text-sm font-medium">$75M</p>
                                </div>
                                <div>
                                    <p class="text-xs text-gray-500 dark:text-gray-400">Founded</p>
                                    <p class="text-sm font-medium">2014</p>
                                </div>
                            </div>
                            <div class="mt-4">
                                <a href="#" class="text-marcomm-blue text-sm hover:underline">View Full Profile</a>
                            </div>
                        </div>
                        
                        <div class="bg-white dark:bg-marcomm-gray-dark rounded-lg shadow-sm p-4 border border-gray-200 dark:border-marcomm-dark hover:shadow-md transition-shadow relative">
                            <div class="absolute top-2 right-2 bg-marcomm-yellow/20 text-marcomm-yellow px-2 py-0.5 rounded text-xs font-medium">
                                Medium Threat
                            </div>
                            <h4 class="font-semibold text-marcomm-dark dark:text-white">EpiHunter</h4>
                            <p class="text-sm text-gray-600 dark:text-gray-400 mt-1">Seizure Detection</p>
                            <div class="mt-4 grid grid-cols-2 gap-2">
                                <div>
                                    <p class="text-xs text-gray-500 dark:text-gray-400">Patents</p>
                                    <p class="text-sm font-medium">8</p>
                                </div>
                                <div>
                                    <p class="text-xs text-gray-500 dark:text-gray-400">Clinical Trials</p>
                                    <p class="text-sm font-medium">1</p>
                                </div>
                                <div>
                                    <p class="text-xs text-gray-500 dark:text-gray-400">Funding</p>
                                    <p class="text-sm font-medium">$20M</p>
                                </div>
                                <div>
                                    <p class="text-xs text-gray-500 dark:text-gray-400">Founded</p>
                                    <p class="text-sm font-medium">2019</p>
                                </div>
                            </div>
                            <div class="mt-4">
                                <a href="#" class="text-marcomm-blue text-sm hover:underline">View Full Profile</a>
                            </div>
                        </div>
                        
                        <div class="bg-white dark:bg-marcomm-gray-dark rounded-lg shadow-sm p-4 border border-gray-200 dark:border-marcomm-dark hover:shadow-md transition-shadow relative">
                            <div class="absolute top-2 right-2 bg-marcomm-orange/20 text-marcomm-orange px-2 py-0.5 rounded text-xs font-medium">
                                High Threat
                            </div>
                            <h4 class="font-semibold text-marcomm-dark dark:text-white">Ceribell</h4>
                            <p class="text-sm text-gray-600 dark:text-gray-400 mt-1">EEG System</p>
                            <div class="mt-4 grid grid-cols-2 gap-2">
                                <div>
                                    <p class="text-xs text-gray-500 dark:text-gray-400">Patents</p>
                                    <p class="text-sm font-medium">12</p>
                                </div>
                                <div>
                                    <p class="text-xs text-gray-500 dark:text-gray-400">Clinical Trials</p>
                                    <p class="text-sm font-medium">3</p>
                                </div>
                                <div>
                                    <p class="text-xs text-gray-500 dark:text-gray-400">Funding</p>
                                    <p class="text-sm font-medium">$50M</p>
                                </div>
                                <div>
                                    <p class="text-xs text-gray-500 dark:text-gray-400">Founded</p>
                                    <p class="text-sm font-medium">2016</p>
                                </div>
                            </div>
                            <div class="mt-4">
                                <a href="#" class="text-marcomm-blue text-sm hover:underline">View Full Profile</a>
                            </div>
                        </div>
                        
                        <div class="bg-white dark:bg-marcomm-gray-dark rounded-lg shadow-sm p-4 border border-gray-200 dark:border-marcomm-dark hover:shadow-md transition-shadow relative">
                            <div class="absolute top-2 right-2 bg-marcomm-yellow/20 text-marcomm-yellow px-2 py-0.5 rounded text-xs font-medium">
                                Medium Threat
                            </div>
                            <h4 class="font-semibold text-marcomm-dark dark:text-white">BioSerenity</h4>
                            <p class="text-sm text-gray-600 dark:text-gray-400 mt-1">Neuronaute</p>
                            <div class="mt-4 grid grid-cols-2 gap-2">
                                <div>
                                    <p class="text-xs text-gray-500 dark:text-gray-400">Patents</p>
                                    <p class="text-sm font-medium">10</p>
                                </div>
                                <div>
                                    <p class="text-xs text-gray-500 dark:text-gray-400">Clinical Trials</p>
                                    <p class="text-sm font-medium">2</p>
                                </div>
                                <div>
                                    <p class="text-xs text-gray-500 dark:text-gray-400">Funding</p>
                                    <p class="text-sm font-medium">$30M</p>
                                </div>
                                <div>
                                    <p class="text-xs text-gray-500 dark:text-gray-400">Founded</p>
                                    <p class="text-sm font-medium">2017</p>
                                </div>
                            </div>
                            <div class="mt-4">
                                <a href="#" class="text-marcomm-blue text-sm hover:underline">View Full Profile</a>
                            </div>
                        </div>
                    </div>
                    
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                        <div class="bg-white dark:bg-marcomm-gray-dark rounded-lg shadow-sm p-4">
                            <div class="flex justify-between items-center mb-4">
                                <h4 class="text-lg font-semibold text-marcomm-dark dark:text-white">Clinical Trials</h4>
                                <div>
                                    <select class="text-xs px-2 py-1 bg-gray-100 dark:bg-gray-700 rounded border-0">
                                        <option>All Phases</option>
                                        <option>Phase I</option>
                                        <option>Phase II</option>
                                        <option>Phase III</option>
                                        <option>Phase IV</option>
                                    </select>
                                </div>
                            </div>
                            <div class="table-responsive">
                                <table class="min-w-full divide-y divide-gray-200 dark:divide-marcomm-dark">
                                    <thead class="bg-marcomm-gray dark:bg-marcomm-dark">
                                        <tr>
                                            <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase">Company</th>
                                            <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase">Trial</th>
                                            <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase">Phase</th>
                                            <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase">Status</th>
                                            <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase">Details</th>
                                        </tr>
                                    </thead>
                                    <tbody id="clinical-trials-table" class="divide-y divide-gray-200 dark:divide-marcomm-dark">
                                        <tr class="hover:bg-marcomm-gray dark:hover:bg-marcomm-dark transition-colors">
                                            <td class="px-4 py-3 text-sm text-gray-600 dark:text-gray-400">NeuroPace</td>
                                            <td class="px-4 py-3 text-sm text-gray-600 dark:text-gray-400">RNS System</td>
                                            <td class="px-4 py-3 text-sm text-gray-600 dark:text-gray-400">
                                                <span class="inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-purple-100 text-purple-800 dark:bg-purple-800 dark:text-purple-100">
                                                    Phase III
                                                </span>
                                            </td>
                                            <td class="px-4 py-3 text-sm text-gray-600 dark:text-gray-400">
                                                <span class="inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-green-100 text-green-800 dark:bg-green-800 dark:text-green-100">
                                                    Active
                                                </span>
                                            </td>
                                            <td class="px-4 py-3 text-sm">
                                                <button class="text-marcomm-orange hover:underline">View</button>
                                            </td>
                                        </tr>
                                        <tr class="hover:bg-marcomm-gray dark:hover:bg-marcomm-dark transition-colors">
                                            <td class="px-4 py-3 text-sm text-gray-600 dark:text-gray-400">EpiHunter</td>
                                            <td class="px-4 py-3 text-sm text-gray-600 dark:text-gray-400">Seizure Detection</td>
                                            <td class="px-4 py-3 text-sm text-gray-600 dark:text-gray-400">
                                                <span class="inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-800 dark:text-blue-100">
                                                    Phase II
                                                </span>
                                            </td>
                                            <td class="px-4 py-3 text-sm text-gray-600 dark:text-gray-400">
                                                <span class="inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-800 dark:text-blue-100">
                                                    Recruiting
                                                </span>
                                            </td>
                                            <td class="px-4 py-3 text-sm">
                                                <button class="text-marcomm-orange hover:underline">View</button>
                                            </td>
                                        </tr>
                                        <tr class="hover:bg-marcomm-gray dark:hover:bg-marcomm-dark transition-colors">
                                            <td class="px-4 py-3 text-sm text-gray-600 dark:text-gray-400">Ceribell</td>
                                            <td class="px-4 py-3 text-sm text-gray-600 dark:text-gray-400">EEG System</td>
                                            <td class="px-4 py-3 text-sm text-gray-600 dark:text-gray-400">
                                                <span class="inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-indigo-100 text-indigo-800 dark:bg-indigo-800 dark:text-indigo-100">
                                                    Phase IV
                                                </span>
                                            </td>
                                            <td class="px-4 py-3 text-sm text-gray-600 dark:text-gray-400">
                                                <span class="inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-100">
                                                    Completed
                                                </span>
                                            </td>
                                            <td class="px-4 py-3 text-sm">
                                                <button class="text-marcomm-orange hover:underline">View</button>
                                            </td>
                                        </tr>
                                        <tr class="hover:bg-marcomm-gray dark:hover:bg-marcomm-dark transition-colors">
                                            <td class="px-4 py-3 text-sm text-gray-600 dark:text-gray-400">BioSerenity</td>
                                            <td class="px-4 py-3 text-sm text-gray-600 dark:text-gray-400">Neuronaute</td>
                                            <td class="px-4 py-3 text-sm text-gray-600 dark:text-gray-400">
                                                <span class="inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-800 dark:text-blue-100">
                                                    Phase II
                                                </span>
                                            </td>
                                            <td class="px-4 py-3 text-sm text-gray-600 dark:text-gray-400">
                                                <span class="inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-green-100 text-green-800 dark:bg-green-800 dark:text-green-100">
                                                    Active
                                                </span>
                                            </td>
                                            <td class="px-4 py-3 text-sm">
                                                <button class="text-marcomm-orange hover:underline">View</button>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        
                        <div class="bg-white dark:bg-marcomm-gray-dark rounded-lg shadow-sm p-4">
                            <div class="flex justify-between items-center mb-4">
                                <h4 class="text-lg font-semibold text-marcomm-dark dark:text-white">Patent Analytics</h4>
                                <div>
                                    <button class="text-xs px-2 py-1 bg-marcomm-blue text-white rounded">
                                        <i class="fas fa-search mr-1"></i> Search Patents
                                    </button>
                                </div>
                            </div>
                            
                            <div class="flex flex-wrap mb-4">
                                <div class="mr-2 mb-2">
                                    <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-marcomm-blue/10 text-marcomm-blue dark:bg-marcomm-blue/20 dark:text-marcomm-blue-dark">
                                        Seizure Detection <i class="fas fa-times ml-1 cursor-pointer"></i>
                                    </span>
                                </div>
                                <div class="mr-2 mb-2">
                                    <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-marcomm-blue/10 text-marcomm-blue dark:bg-marcomm-blue/20 dark:text-marcomm-blue-dark">
                                        Neurostimulation <i class="fas fa-times ml-1 cursor-pointer"></i>
                                    </span>
                                </div>
                                <div class="mr-2 mb-2">
                                    <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-marcomm-blue/10 text-marcomm-blue dark:bg-marcomm-blue/20 dark:text-marcomm-blue-dark">
                                        EEG <i class="fas fa-times ml-1 cursor-pointer"></i>
                                    </span>
                                </div>
                            </div>
                            
                            <canvas id="patent-activity-chart" height="200"></canvas>
                            
                            <div class="mt-4">
                                <h5 class="text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Recent Patent Filings</h5>
                                <div class="space-y-2">
                                    <div class="p-3 bg-gray-50 dark:bg-gray-800 rounded-lg">
                                        <div class="flex justify-between">
                                            <div>
                                                <p class="text-sm font-medium">US11752348 - Adaptive seizure control</p>
                                                <p class="text-xs text-gray-600 dark:text-gray-400">NeuroPace - Sep 12, 2023</p>
                                            </div>
                                            <div>
                                                <button class="text-xs px-2 py-0.5 text-marcomm-blue hover:underline">View</button>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="p-3 bg-gray-50 dark:bg-gray-800 rounded-lg">
                                        <div class="flex justify-between">
                                            <div>
                                                <p class="text-sm font-medium">US11696681 - Seizure alert system</p>
                                                <p class="text-xs text-gray-600 dark:text-gray-400">EpiHunter - Jan 15, 2024</p>
                                            </div>
                                            <div>
                                                <button class="text-xs px-2 py-0.5 text-marcomm-blue hover:underline">View</button>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="p-3 bg-gray-50 dark:bg-gray-800 rounded-lg">
                                        <div class="flex justify-between">
                                            <div>
                                                <p class="text-sm font-medium">US11801002 - Portable EEG device</p>
                                                <p class="text-xs text-gray-600 dark:text-gray-400">Ceribell - Oct 20, 2023</p>
                                            </div>
                                            <div>
                                                <button class="text-xs px-2 py-0.5 text-marcomm-blue hover:underline">View</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="bg-white dark:bg-marcomm-gray-dark rounded-lg shadow-sm p-4">
                        <h4 class="text-lg font-semibold text-marcomm-dark dark:text-white mb-4">Technology Comparison</h4>
                        <div class="overflow-x-auto">
                            <table class="min-w-full divide-y divide-gray-200 dark:divide-marcomm-dark">
                                <thead class="bg-marcomm-gray dark:bg-marcomm-dark">
                                    <tr>
                                        <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300">Feature</th>
                                        <th class="px-4 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-300">NeuroPace</th>
                                        <th class="px-4 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-300">EpiHunter</th>
                                        <th class="px-4 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-300">Ceribell</th>
                                        <th class="px-4 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-300">BioSerenity</th>
                                    </tr>
                                </thead>
                                <tbody class="divide-y divide-gray-200 dark:divide-marcomm-dark">
                                    <tr>
                                        <td class="px-4 py-3 text-sm font-medium text-gray-700 dark:text-gray-300">Technology Type</td>
                                        <td class="px-4 py-3 text-sm text-center text-gray-600 dark:text-gray-400">Responsive Neurostimulation</td>
                                        <td class="px-4 py-3 text-sm text-center text-gray-600 dark:text-gray-400">Wearable EEG</td>
                                        <td class="px-4 py-3 text-sm text-center text-gray-600 dark:text-gray-400">Rapid EEG</td>
                                        <td class="px-4 py-3 text-sm text-center text-gray-600 dark:text-gray-400">Wearable Monitoring</td>
                                    </tr>
                                    <tr>
                                        <td class="px-4 py-3 text-sm font-medium text-gray-700 dark:text-gray-300">Invasiveness</td>
                                        <td class="px-4 py-3 text-sm text-center text-gray-600 dark:text-gray-400">Implantable</td>
                                        <td class="px-4 py-3 text-sm text-center text-gray-600 dark:text-gray-400">Non-invasive</td>
                                        <td class="px-4 py-3 text-sm text-center text-gray-600 dark:text-gray-400">Non-invasive</td>
                                        <td class="px-4 py-3 text-sm text-center text-gray-600 dark:text-gray-400">Non-invasive</td>
                                    </tr>
                                    <tr>
                                        <td class="px-4 py-3 text-sm font-medium text-gray-700 dark:text-gray-300">AI/ML Integration</td>
                                        <td class="px-4 py-3 text-sm text-center">
                                            <i class="fas fa-check text-green-500"></i>
                                        </td>
                                        <td class="px-4 py-3 text-sm text-center">
                                            <i class="fas fa-check text-green-500"></i>
                                        </td>
                                        <td class="px-4 py-3 text-sm text-center">
                                            <i class="fas fa-check text-green-500"></i>
                                        </td>
                                        <td class="px-4 py-3 text-sm text-center">
                                            <i class="fas fa-check text-green-500"></i>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td class="px-4 py-3 text-sm font-medium text-gray-700 dark:text-gray-300">Treatment Capability</td>
                                        <td class="px-4 py-3 text-sm text-center">
                                            <i class="fas fa-check text-green-500"></i>
                                        </td>
                                        <td class="px-4 py-3 text-sm text-center">
                                            <i class="fas fa-times text-red-500"></i>
                                        </td>
                                        <td class="px-4 py-3 text-sm text-center">
                                            <i class="fas fa-times text-red-500"></i>
                                        </td>
                                        <td class="px-4 py-3 text-sm text-center">
                                            <i class="fas fa-check text-green-500"></i>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td class="px-4 py-3 text-sm font-medium text-gray-700 dark:text-gray-300">Remote Monitoring</td>
                                        <td class="px-4 py-3 text-sm text-center">
                                            <i class="fas fa-check text-green-500"></i>
                                        </td>
                                        <td class="px-4 py-3 text-sm text-center">
                                            <i class="fas fa-check text-green-500"></i>
                                        </td>
                                        <td class="px-4 py-3 text-sm text-center">
                                            <i class="fas fa-check text-green-500"></i>
                                        </td>
                                        <td class="px-4 py-3 text-sm text-center">
                                            <i class="fas fa-check text-green-500"></i>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td class="px-4 py-3 text-sm font-medium text-gray-700 dark:text-gray-300">FDA Status</td>
                                        <td class="px-4 py-3 text-sm text-center text-gray-600 dark:text-gray-400">Approved</td>
                                        <td class="px-4 py-3 text-sm text-center text-gray-600 dark:text-gray-400">In Review</td>
                                        <td class="px-4 py-3 text-sm text-center text-gray-600 dark:text-gray-400">Approved</td>
                                        <td class="px-4 py-3 text-sm text-center text-gray-600 dark:text-gray-400">CE Mark</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- Market Overview -->
                <div id="market-overview" class="tab-content space-y-6 hidden">
                    <div class="flex flex-col md:flex-row justify-between mb-4">
                        <h3 class="text-xl font-semibold text-marcomm-dark dark:text-white mb-2 md:mb-0">Epilepsy Market Overview</h3>
                        <div class="flex space-x-2">
                            <button class="flex items-center px-3 py-1.5 bg-gray-100 dark:bg-gray-700 rounded-md text-sm hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors">
                                <i class="fas fa-calendar-alt mr-1.5"></i> 2020-2025
                            </button>
                            <button class="flex items-center px-3 py-1.5 bg-marcomm-blue text-white rounded-md text-sm hover:bg-marcomm-blue-dark transition-colors">
                                <i class="fas fa-file-download mr-1.5"></i> Export
                            </button>
                        </div>
                    </div>
                
                    <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4">
                        <div class="bg-white dark:bg-marcomm-gray-dark rounded-lg shadow-sm p-4">
                            <h5 class="text-sm font-medium text-gray-500 dark:text-gray-400">Total Market Size</h5>
                            <p class="text-2xl font-semibold mt-1">$3.5B</p>
                            <p class="text-xs text-gray-500 dark:text-gray-400 mt-1">2024 Estimate (IQVIA)</p>
                            <div class="mt-2">
                                <span class="text-xs text-green-600 dark:text-green-400">
                                    <i class="fas fa-arrow-up mr-1"></i> 6.2% YoY
                                </span>
                            </div>
                        </div>
                        
                        <div class="bg-white dark:bg-marcomm-gray-dark rounded-lg shadow-sm p-4">
                            <h5 class="text-sm font-medium text-gray-500 dark:text-gray-400">Refractory Patients</h5>
                            <p class="text-2xl font-semibold mt-1">30%</p>
                            <p class="text-xs text-gray-500 dark:text-gray-400 mt-1">Medicare 2024</p>
                            <div class="mt-2">
                                <span class="text-xs text-red-600 dark:text-red-400">
                                    <i class="fas fa-arrow-up mr-1"></i> 2% YoY
                                </span>
                            </div>
                        </div>
                        
                        <div class="bg-white dark:bg-marcomm-gray-dark rounded-lg shadow-sm p-4">
                            <h5 class="text-sm font-medium text-gray-500 dark:text-gray-400">Drug Dominance</h5>
                            <p class="text-2xl font-semibold mt-1">70%</p>
                            <p class="text-xs text-gray-500 dark:text-gray-400 mt-1">Market Share</p>
                            <div class="mt-2">
                                <span class="text-xs text-red-600 dark:text-red-400">
                                    <i class="fas fa-arrow-down mr-1"></i> 3% YoY
                                </span>
                            </div>
                        </div>
                        
                        <div class="bg-white dark:bg-marcomm-gray-dark rounded-lg shadow-sm p-4">
                            <h5 class="text-sm font-medium text-gray-500 dark:text-gray-400">Device Growth</h5>
                            <p class="text-2xl font-semibold mt-1">8%</p>
                            <p class="text-xs text-gray-500 dark:text-gray-400 mt-1">CAGR 2020-2024</p>
                            <div class="mt-2">
                                <span class="text-xs text-green-600 dark:text-green-400">
                                    <i class="fas fa-arrow-up mr-1"></i> 1.5% vs Prior
                                </span>
                            </div>
                        </div>
                        
                        <div class="bg-white dark:bg-marcomm-gray-dark rounded-lg shadow-sm p-4">
                            <h5 class="text-sm font-medium text-gray-500 dark:text-gray-400">Global Prevalence</h5>
                            <p class="text-2xl font-semibold mt-1">50M</p>
                            <p class="text-xs text-gray-500 dark:text-gray-400 mt-1">WHO 2024</p>
                            <div class="mt-2">
                                <span class="text-xs text-gray-600 dark:text-gray-400">
                                    <i class="fas fa-equals mr-1"></i> Stable YoY
                                </span>
                            </div>
                        </div>
                        
                        <div class="bg-white dark:bg-marcomm-gray-dark rounded-lg shadow-sm p-4">
                            <h5 class="text-sm font-medium text-gray-500 dark:text-gray-400">US Incidence</h5>
                            <p class="text-2xl font-semibold mt-1">150K</p>
                            <p class="text-xs text-gray-500 dark:text-gray-400 mt-1">CDC 2024</p>
                            <div class="mt-2">
                                <span class="text-xs text-green-600 dark:text-green-400">
                                    <i class="fas fa-arrow-up mr-1"></i> 2.7% YoY
                                </span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                        <div class="bg-white dark:bg-marcomm-gray-dark rounded-lg shadow-sm p-4">
                            <div class="flex justify-between items-center mb-4">
                                <h4 class="text-lg font-semibold text-marcomm-dark dark:text-white">Market Share Distribution</h4>
                                <div>
                                    <select class="text-xs px-2 py-1 bg-gray-100 dark:bg-gray-700 rounded border-0">
                                        <option>By Category</option>
                                        <option>By Company</option>
                                        <option>By Region</option>
                                    </select>
                                </div>
                            </div>
                            <canvas id="market-share-chart" height="200"></canvas>
                            <div class="mt-4 grid grid-cols-2 md:grid-cols-4 gap-2">
                                <div class="p-2 bg-gray-50 dark:bg-gray-800 rounded text-center">
                                    <p class="text-xs text-gray-500 dark:text-gray-400">Drugs</p>
                                    <p class="text-sm font-medium">70%</p>
                                </div>
                                <div class="p-2 bg-gray-50 dark:bg-gray-800 rounded text-center">
                                    <p class="text-xs text-gray-500 dark:text-gray-400">Devices</p>
                                    <p class="text-sm font-medium">20%</p>
                                </div>
                                <div class="p-2 bg-gray-50 dark:bg-gray-800 rounded text-center">
                                    <p class="text-xs text-gray-500 dark:text-gray-400">Diagnostics</p>
                                    <p class="text-sm font-medium">7%</p>
                                </div>
                                <div class="p-2 bg-gray-50 dark:bg-gray-800 rounded text-center">
                                    <p class="text-xs text-gray-500 dark:text-gray-400">Other</p>
                                    <p class="text-sm font-medium">3%</p>
                                </div>
                            </div>
                        </div>
                        
                        <div class="bg-white dark:bg-marcomm-gray-dark rounded-lg shadow-sm p-4">
                            <div class="flex justify-between items-center mb-4">
                                <h4 class="text-lg font-semibold text-marcomm-dark dark:text-white">Global Market Trends</h4>
                                <div class="flex space-x-2">
                                    <button class="text-xs px-2 py-1 bg-gray-100 dark:bg-gray-700 rounded text-gray-800 dark:text-gray-200">5Y</button>
                                    <button class="text-xs px-2 py-1 bg-marcomm-blue text-white rounded">All</button>
                                </div>
                            </div>
                            <canvas id="market-trend-chart" height="200"></canvas>
                        </div>
                    </div>
                    
                    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                        <div class="bg-white dark:bg-marcomm-gray-dark rounded-lg shadow-sm p-4">
                            <h4 class="text-lg font-semibold text-marcomm-dark dark:text-white mb-4">Regional Distribution</h4>
                            <canvas id="regional-distribution-chart" height="200"></canvas>
                        </div>
                        
                        <div class="bg-white dark:bg-marcomm-gray-dark rounded-lg shadow-sm p-4">
                            <h4 class="text-lg font-semibold text-marcomm-dark dark:text-white mb-4">Epilepsy Type Distribution</h4>
                            <canvas id="epilepsy-type-chart" height="200"></canvas>
                            <div class="mt-4 grid grid-cols-2 gap-2">
                                <div class="p-2 bg-gray-50 dark:bg-gray-800 rounded">
                                    <p class="text-xs text-gray-500 dark:text-gray-400">Focal Onset</p>
                                    <p class="text-sm font-medium">60%</p>
                                </div>
                                <div class="p-2 bg-gray-50 dark:bg-gray-800 rounded">
                                    <p class="text-xs text-gray-500 dark:text-gray-400">Generalized Onset</p>
                                    <p class="text-sm font-medium">30%</p>
                                </div>
                                <div class="p-2 bg-gray-50 dark:bg-gray-800 rounded">
                                    <p class="text-xs text-gray-500 dark:text-gray-400">Unknown Onset</p>
                                    <p class="text-sm font-medium">7%</p>
                                </div>
                                <div class="p-2 bg-gray-50 dark:bg-gray-800 rounded">
                                    <p class="text-xs text-gray-500 dark:text-gray-400">Combined/Other</p>
                                    <p class="text-sm font-medium">3%</p>
                                </div>
                            </div>
                        </div>
                        
                        <div class="bg-white dark:bg-marcomm-gray-dark rounded-lg shadow-sm p-4">
                            <h4 class="text-lg font-semibold text-marcomm-dark dark:text-white mb-4">Market Forecasts (2025-2030)</h4>
                            <canvas id="market-forecast-chart" height="200"></canvas>
                            <div class="mt-4">
                                <div class="flex justify-between items-center text-sm">
                                    <span>Compound Annual Growth Rate (CAGR)</span>
                                    <span class="font-medium text-marcomm-green">6.8%</span>
                                </div>
                                <div class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-1.5 mt-1">
                                    <div class="bg-marcomm-green h-1.5 rounded-full" style="width: 68%"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="bg-white dark:bg-marcomm-gray-dark rounded-lg shadow-sm p-4">
                        <h4 class="text-lg font-semibold text-marcomm-dark dark:text-white mb-4">Market Drivers & Restraints</h4>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <h5 class="text-base font-medium text-marcomm-green mb-3">Market Drivers</h5>
                                <div class="space-y-3">
                                    <div class="flex">
                                        <div class="flex-shrink-0 w-8 h-8 bg-marcomm-green/20 rounded-full flex items-center justify-center">
                                            <i class="fas fa-arrow-up text-marcomm-green"></i>
                                        </div>
                                        <div class="ml-3">
                                            <h6 class="text-sm font-medium">Rising Prevalence</h6>
                                            <p class="text-xs text-gray-600 dark:text-gray-400">Increasing incidence of epilepsy globally, especially in aging populations</p>
                                        </div>
                                    </div>
                                    <div class="flex">
                                        <div class="flex-shrink-0 w-8 h-8 bg-marcomm-green/20 rounded-full flex items-center justify-center">
                                            <i class="fas fa-arrow-up text-marcomm-green"></i>
                                        </div>
                                        <div class="ml-3">
                                            <h6 class="text-sm font-medium">Technological Advancements</h6>
                                            <p class="text-xs text-gray-600 dark:text-gray-400">Innovations in neurostimulation devices and wearable EEG technologies</p>
                                        </div>
                                    </div>
                                    <div class="flex">
                                        <div class="flex-shrink-0 w-8 h-8 bg-marcomm-green/20 rounded-full flex items-center justify-center">
                                            <i class="fas fa-arrow-up text-marcomm-green"></i>
                                        </div>
                                        <div class="ml-3">
                                            <h6 class="text-sm font-medium">Growing Refractory Patient Population</h6>
                                            <p class="text-xs text-gray-600 dark:text-gray-400">Increasing number of patients with drug-resistant epilepsy</p>
                                        </div>
                                    </div>
                                    <div class="flex">
                                        <div class="flex-shrink-0 w-8 h-8 bg-marcomm-green/20 rounded-full flex items-center justify-center">
                                            <i class="fas fa-arrow-up text-marcomm-green"></i>
                                        </div>
                                        <div class="ml-3">
                                            <h6 class="text-sm font-medium">Favorable Reimbursement Policies</h6>
                                            <p class="text-xs text-gray-600 dark:text-gray-400">Improved Medicare and private insurance coverage for advanced treatments</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div>
                                <h5 class="text-base font-medium text-marcomm-red mb-3">Market Restraints</h5>
                                <div class="space-y-3">
                                    <div class="flex">
                                        <div class="flex-shrink-0 w-8 h-8 bg-marcomm-red/20 rounded-full flex items-center justify-center">
                                            <i class="fas fa-arrow-down text-marcomm-red"></i>
                                        </div>
                                        <div class="ml-3">
                                            <h6 class="text-sm font-medium">High Treatment Costs</h6>
                                            <p class="text-xs text-gray-600 dark:text-gray-400">Expensive neurostimulation devices and surgical procedures</p>
                                        </div>
                                    </div>
                                    <div class="flex">
                                        <div class="flex-shrink-0 w-8 h-8 bg-marcomm-red/20 rounded-full flex items-center justify-center">
                                            <i class="fas fa-arrow-down text-marcomm-red"></i>
                                        </div>
                                        <div class="ml-3">
                                            <h6 class="text-sm font-medium">Stringent Regulatory Requirements</h6>
                                            <p class="text-xs text-gray-600 dark:text-gray-400">Complex and lengthy approval processes for new treatments</p>
                                        </div>
                                    </div>
                                    <div class="flex">
                                        <div class="flex-shrink-0 w-8 h-8 bg-marcomm-red/20 rounded-full flex items-center justify-center">
                                            <i class="fas fa-arrow-down text-marcomm-red"></i>
                                        </div>
                                        <div class="ml-3">
                                            <h6 class="text-sm font-medium">Limited Awareness</h6>
                                            <p class="text-xs text-gray-600 dark:text-gray-400">Lack of awareness about advanced treatment options among patients</p>
                                        </div>
                                    </div>
                                    <div class="flex">
                                        <div class="flex-shrink-0 w-8 h-8 bg-marcomm-red/20 rounded-full flex items-center justify-center">
                                            <i class="fas fa-arrow-down text-marcomm-red"></i>
                                        </div>
                                        <div class="ml-3">
                                            <h6 class="text-sm font-medium">Side Effects of Treatments</h6>
                                            <p class="text-xs text-gray-600 dark:text-gray-400">Adverse effects of anti-epileptic drugs and device implantation</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Patient Tracking -->
                <div id="patient-tracking" class="tab-content space-y-6 hidden">
                    <div class="flex flex-col md:flex-row justify-between mb-4">
                        <h3 class="text-xl font-semibold text-marcomm-dark dark:text-white mb-2 md:mb-0">Patient Flow & Treatment Pathways</h3>
                        <div class="flex space-x-2">
                            <button class="flex items-center px-3 py-1.5 bg-gray-100 dark:bg-gray-700 rounded-md text-sm hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors">
                                <i class="fas fa-filter mr-1.5"></i> Filter Data
                            </button>
                            <button class="flex items-center px-3 py-1.5 bg-marcomm-blue text-white rounded-md text-sm hover:bg-marcomm-blue-dark transition-colors">
                                <i class="fas fa-file-download mr-1.5"></i> Export
                            </button>
                        </div>
                    </div>
                    
                    <div class="bg-white dark:bg-marcomm-gray-dark rounded-lg shadow-sm p-4">
                        <h4 class="text-lg font-semibold text-marcomm-dark dark:text-white mb-4">Patient AED Usage Flow</h4>
                        <div class="table-responsive">
                            <table class="min-w-full divide-y divide-gray-200 dark:divide-marcomm-dark">
                                <thead class="bg-marcomm-gray dark:bg-marcomm-dark">
                                    <tr>
                                        <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase">Patient Cohort</th>
                                        <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase">Initial AED</th>
                                        <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase">Switch Rate</th>
                                        <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase">Adherence</th>
                                        <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase">Details</th>
                                    </tr>
                                </thead>
                                <tbody id="patient-tracking-table" class="divide-y divide-gray-200 dark:divide-marcomm-dark">
                                    <tr class="hover:bg-marcomm-gray dark:hover:bg-marcomm-dark transition-colors">
                                        <td class="px-4 py-3 text-sm text-gray-600 dark:text-gray-400">Newly Diagnosed</td>
                                        <td class="px-4 py-3 text-sm text-gray-600 dark:text-gray-400">Keppra</td>
                                        <td class="px-4 py-3 text-sm text-gray-600 dark:text-gray-400">15%</td>
                                        <td class="px-4 py-3 text-sm text-gray-600 dark:text-gray-400">85%</td>
                                        <td class="px-4 py-3 text-sm">
                                            <button class="text-marcomm-orange hover:underline">View</button>
                                        </td>
                                    </tr>
                                    <tr class="hover:bg-marcomm-gray dark:hover:bg-marcomm-dark transition-colors">
                                        <td class="px-4 py-3 text-sm text-gray-600 dark:text-gray-400">Refractory</td>
                                        <td class="px-4 py-3 text-sm text-gray-600 dark:text-gray-400">Lamictal</td>
                                        <td class="px-4 py-3 text-sm text-gray-600 dark:text-gray-400">40%</td>
                                        <td class="px-4 py-3 text-sm text-gray-600 dark:text-gray-400">70%</td>
                                        <td class="px-4 py-3 text-sm">
                                            <button class="text-marcomm-orange hover:underline">View</button>
                                        </td>
                                    </tr>
                                    <tr class="hover:bg-marcomm-gray dark:hover:bg-marcomm-dark transition-colors">
                                        <td class="px-4 py-3 text-sm text-gray-600 dark:text-gray-400">Pediatric</td>
                                        <td class="px-4 py-3 text-sm text-gray-600 dark:text-gray-400">Fycompa</td>
                                        <td class="px-4 py-3 text-sm text-gray-600 dark:text-gray-400">25%</td>
                                        <td class="px-4 py-3 text-sm text-gray-600 dark:text-gray-400">80%</td>
                                        <td class="px-4 py-3 text-sm">
                                            <button class="text-marcomm-orange hover:underline">View</button>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                    
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                        <div class="bg-white dark:bg-marcomm-gray-dark rounded-lg shadow-sm p-4">
                            <h4 class="text-lg font-semibold text-marcomm-dark dark:text-white mb-4">AED Efficacy Over Time</h4>
                            <canvas id="aed-efficacy-chart" height="200"></canvas>
                        </div>
                        
                        <div class="bg-white dark:bg-marcomm-gray-dark rounded-lg shadow-sm p-4">
                            <h4 class="text-lg font-semibold text-marcomm-dark dark:text-white mb-4">Treatment Pathways Analysis</h4>
                            <canvas id="treatment-pathways-chart" height="200"></canvas>
                        </div>
                    </div>
                    
                    <div class="bg-white dark:bg-marcomm-gray-dark rounded-lg shadow-sm p-4">
                        <div class="flex justify-between items-center mb-4">
                            <h4 class="text-lg font-semibold text-marcomm-dark dark:text-white">Patient Referral Patterns</h4>
                            <div>
                                <select class="text-xs px-2 py-1 bg-gray-100 dark:bg-gray-700 rounded border-0">
                                    <option>All Patients</option>
                                    <option>Refractory Only</option>
                                    <option>By Age Group</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-4">
                            <div class="bg-gray-50 dark:bg-gray-800 p-4 rounded-lg">
                                <h5 class="text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Average Time to Specialist</h5>
                                <div class="flex items-end">
                                    <p class="text-2xl font-semibold text-marcomm-dark dark:text-white">68</p>
                                    <p class="ml-1 text-sm text-gray-600 dark:text-gray-400">days</p>
                                </div>
                                <div class="mt-2">
                                    <span class="text-xs text-red-600 dark:text-red-400">
                                        <i class="fas fa-arrow-up mr-1"></i> 5.2% vs Prior Year
                                    </span>
                                </div>
                            </div>
                            
                            <div class="bg-gray-50 dark:bg-gray-800 p-4 rounded-lg">
                                <h5 class="text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Refractory Patient Recognition</h5>
                                <div class="flex items-end">
                                    <p class="text-2xl font-semibold text-marcomm-dark dark:text-white">2.6</p>
                                    <p class="ml-1 text-sm text-gray-600 dark:text-gray-400">years</p>
                                </div>
                                <div class="mt-2">
                                    <span class="text-xs text-green-600 dark:text-green-400">
                                        <i class="fas fa-arrow-down mr-1"></i> 8.1% vs Prior Year
                                    </span>
                                </div>
                            </div>
                            
                            <div class="bg-gray-50 dark:bg-gray-800 p-4 rounded-lg">
                                <h5 class="text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Advanced Care Referral Rate</h5>
                                <div class="flex items-end">
                                    <p class="text-2xl font-semibold text-marcomm-dark dark:text-white">15%</p>
                                    <p class="ml-1 text-sm text-gray-600 dark:text-gray-400">of refractory</p>
                                </div>
                                <div class="mt-2">
                                    <span class="text-xs text-green-600 dark:text-green-400">
                                        <i class="fas fa-arrow-up mr-1"></i> 3.2% vs Prior Year
                                    </span>
                                </div>
                            </div>
                        </div>
                        
                        <div id="referral-sankey-diagram" class="w-full h-64"></div>
                    </div>
                    
                    <div class="bg-white dark:bg-marcomm-gray-dark rounded-lg shadow-sm p-4">
                        <h4 class="text-lg font-semibold text-marcomm-dark dark:text-white mb-4">Refractory Patient Analysis</h4>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <h5 class="text-base font-medium mb-3">Time to Refractory Diagnosis</h5>
                                <canvas id="refractory-time-chart" height="200"></canvas>
                            </div>
                            
                            <div>
                                <h5 class="text-base font-medium mb-3">Advanced Care Utilization</h5>
                                <div class="space-y-3">
                                    <div>
                                        <div class="flex justify-between items-center text-sm mb-1">
                                            <span>Continuing with Additional AEDs</span>
                                            <span class="font-medium">65%</span>
                                        </div>
                                        <div class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2">
                                            <div class="bg-marcomm-blue h-2 rounded-full" style="width: 65%"></div>
                                        </div>
                                    </div>
                                    <div>
                                        <div class="flex justify-between items-center text-sm mb-1">
                                            <span>Neurostimulation Devices</span>
                                            <span class="font-medium">15%</span>
                                        </div>
                                        <div class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2">
                                            <div class="bg-marcomm-orange h-2 rounded-full" style="width: 15%"></div>
                                        </div>
                                    </div>
                                    <div>
                                        <div class="flex justify-between items-center text-sm mb-1">
                                            <span>Surgical Evaluation</span>
                                            <span class="font-medium">12%</span>
                                        </div>
                                        <div class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2">
                                            <div class="bg-marcomm-green h-2 rounded-full" style="width: 12%"></div>
                                        </div>
                                    </div>
                                    <div>
                                        <div class="flex justify-between items-center text-sm mb-1">
                                            <span>Alternative Therapies</span>
                                            <span class="font-medium">8%</span>
                                        </div>
                                        <div class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2">
                                            <div class="bg-purple-500 h-2 rounded-full" style="width: 8%"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Medicare Claims -->
                <div id="medicare-claims" class="tab-content space-y-6 hidden">
                    <div class="flex flex-col md:flex-row justify-between mb-4">
                        <h3 class="text-xl font-semibold text-marcomm-dark dark:text-white mb-2 md:mb-0">Medicare Claims Data Analysis</h3>
                        <div class="flex space-x-2">
                            <button class="flex items-center px-3 py-1.5 bg-gray-100 dark:bg-gray-700 rounded-md text-sm hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors">
                                <i class="fas fa-calendar-alt mr-1.5"></i> 2020-2024
                            </button>
                            <button class="flex items-center px-3 py-1.5 bg-marcomm-blue text-white rounded-md text-sm hover:bg-marcomm-blue-dark transition-colors">
                                <i class="fas fa-file-download mr-1.5"></i> Export
                            </button>
                        </div>
                    </div>
                    
                    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4">
                        <div class="bg-white dark:bg-marcomm-gray-dark rounded-lg shadow-sm p-4">
                            <div class="flex justify-between">
                                <div>
                                    <h5 class="text-sm font-medium text-gray-500 dark:text-gray-400">Total AED Claims</h5>
                                    <p class="text-2xl font-semibold mt-1">267,842</p>
                                </div>
                                <div class="w-10 h-10 bg-blue-100 dark:bg-blue-900/30 rounded-full flex items-center justify-center">
                                    <i class="fas fa-pills text-blue-500 dark:text-blue-400"></i>
                                </div>
                            </div>
                            <p class="text-xs text-gray-500 dark:text-gray-400 mt-1">Medicare Part D, 2024</p>
                            <div class="mt-2">
                                <span class="text-xs text-green-600 dark:text-green-400">
                                    <i class="fas fa-arrow-up mr-1"></i> 4.1% YoY
                                </span>
                            </div>
                        </div>
                        
                        <div class="bg-white dark:bg-marcomm-gray-dark rounded-lg shadow-sm p-4">
                            <div class="flex justify-between">
                                <div>
                                    <h5 class="text-sm font-medium text-gray-500 dark:text-gray-400">Device Procedure Claims</h5>
                                    <p class="text-2xl font-semibold mt-1">16,500</p>
                                </div>
                                <div class="w-10 h-10 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center">
                                    <i class="fas fa-microchip text-green-500 dark:text-green-400"></i>
                                </div>
                            </div>
                            <p class="text-xs text-gray-500 dark:text-gray-400 mt-1">Medicare Part B, 2024</p>
                            <div class="mt-2">
                                <span class="text-xs text-green-600 dark:text-green-400">
                                    <i class="fas fa-arrow-up mr-1"></i> 8.3% YoY
                                </span>
                            </div>
                        </div>
                        
                        <div class="bg-white dark:bg-marcomm-gray-dark rounded-lg shadow-sm p-4">
                            <div class="flex justify-between">
                                <div>
                                    <h5 class="text-sm font-medium text-gray-500 dark:text-gray-400">Avg. Cost Per AED Claim</h5>
                                    <p class="text-2xl font-semibold mt-1">$127</p>
                                </div>
                                <div class="w-10 h-10 bg-orange-100 dark:bg-orange-900/30 rounded-full flex items-center justify-center">
                                    <i class="fas fa-dollar-sign text-orange-500 dark:text-orange-400"></i>
                                </div>
                            </div>
                            <p class="text-xs text-gray-500 dark:text-gray-400 mt-1">Medicare Part D, 2024</p>
                            <div class="mt-2">
                                <span class="text-xs text-red-600 dark:text-red-400">
                                    <i class="fas fa-arrow-up mr-1"></i> 2.8% YoY
                                </span>
                            </div>
                        </div>
                        
                        <div class="bg-white dark:bg-marcomm-gray-dark rounded-lg shadow-sm p-4">
                            <div class="flex justify-between">
                                <div>
                                    <h5 class="text-sm font-medium text-gray-500 dark:text-gray-400">Avg. Cost Per Device Claim</h5>
                                    <p class="text-2xl font-semibold mt-1">$28,450</p>
                                </div>
                                <div class="w-10 h-10 bg-purple-100 dark:bg-purple-900/30 rounded-full flex items-center justify-center">
                                    <i class="fas fa-dollar-sign text-purple-500 dark:text-purple-400"></i>
                                </div>
                            </div>
                            <p class="text-xs text-gray-500 dark:text-gray-400 mt-1">Medicare Part B, 2024</p>
                            <div class="mt-2">
                                <span class="text-xs text-red-600 dark:text-red-400">
                                    <i class="fas fa-arrow-up mr-1"></i> 3.5% YoY
                                </span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                        <div class="bg-white dark:bg-marcomm-gray-dark rounded-lg shadow-sm p-4">
                            <div class="flex justify-between items-center mb-4">
                                <h4 class="text-lg font-semibold text-marcomm-dark dark:text-white">Medicare AED Claims by Drug</h4>
                                <div class="flex space-x-2">
                                    <button class="text-xs px-2 py-1 bg-gray-100 dark:bg-gray-700 rounded text-gray-800 dark:text-gray-200">Quarterly</button>
                                    <button class="text-xs px-2 py-1 bg-marcomm-blue text-white rounded">Annual</button>
                                </div>
                            </div>
                            <canvas id="medicare-aed-claims-chart" height="240"></canvas>
                        </div>
                        
                        <div class="bg-white dark:bg-marcomm-gray-dark rounded-lg shadow-sm p-4">
                            <div class="flex justify-between items-center mb-4">
                                <h4 class="text-lg font-semibold text-marcomm-dark dark:text-white">Medicare Device Procedure Claims</h4>
                                <div>
                                    <select class="text-xs px-2 py-1 bg-gray-100 dark:bg-gray-700 rounded border-0">
                                        <option>By Company</option>
                                        <option>By Procedure Type</option>
                                        <option>By Region</option>
                                    </select>
                                </div>
                            </div>
                            <canvas id="medicare-device-claims-chart" height="240"></canvas>
                        </div>
                    </div>
                    
                    <div class="bg-white dark:bg-marcomm-gray-dark rounded-lg shadow-sm p-4">
                        <div class="flex justify-between items-center mb-4">
                            <h4 class="text-lg font-semibold text-marcomm-dark dark:text-white">CPT Code Analysis</h4>
                            <div>
                                <button class="text-xs px-2 py-1 bg-marcomm-blue text-white rounded">
                                    <i class="fas fa-question-circle mr-1"></i> CPT Code Guide
                                </button>
                            </div>
                        </div>
                        
                        <div class="table-responsive">
                            <table class="min-w-full divide-y divide-gray-200 dark:divide-marcomm-dark">
                                <thead class="bg-marcomm-gray dark:bg-marcomm-dark">
                                    <tr>
                                        <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase">CPT Code</th>
                                        <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase">Description</th>
                                        <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase">Company</th>
                                        <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase">Volume</th>
                                        <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase">Avg. Payment</th>
                                        <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase">YoY Change</th>
                                    </tr>
                                </thead>
                                <tbody class="divide-y divide-gray-200 dark:divide-marcomm-dark">
                                    <tr class="hover:bg-marcomm-gray dark:hover:bg-marcomm-dark transition-colors">
                                        <td class="px-4 py-3 text-sm font-medium">61885</td>
                                        <td class="px-4 py-3 text-sm text-gray-600 dark:text-gray-400">Insertion of neurostimulator pulse generator</td>
                                        <td class="px-4 py-3 text-sm text-gray-600 dark:text-gray-400">Medtronic (DBS)</td>
                                        <td class="px-4 py-3 text-sm text-gray-600 dark:text-gray-400">8,000</td>
                                        <td class="px-4 py-3 text-sm text-gray-600 dark:text-gray-400">$26,450</td>
                                        <td class="px-4 py-3 text-sm text-green-600 dark:text-green-400">+12.3%</td>
                                    </tr>
                                    <tr class="hover:bg-marcomm-gray dark:hover:bg-marcomm-dark transition-colors">
                                        <td class="px-4 py-3 text-sm font-medium">64568</td>
                                        <td class="px-4 py-3 text-sm text-gray-600 dark:text-gray-400">Incision for vagus nerve neurostimulator</td>
                                        <td class="px-4 py-3 text-sm text-gray-600 dark:text-gray-400">Livanova (VNS)</td>
                                        <td class="px-4 py-3 text-sm text-gray-600 dark:text-gray-400">6,000</td>
                                        <td class="px-4 py-3 text-sm text-gray-600 dark:text-gray-400">$23,800</td>
                                        <td class="px-4 py-3 text-sm text-green-600 dark:text-green-400">+8.2%</td>
                                    </tr>
                                    <tr class="hover:bg-marcomm-gray dark:hover:bg-marcomm-dark transition-colors">
                                        <td class="px-4 py-3 text-sm font-medium">61886</td>
                                        <td class="px-4 py-3 text-sm text-gray-600 dark:text-gray-400">Insertion of neurostimulator arrays</td>
                                        <td class="px-4 py-3 text-sm text-gray-600 dark:text-gray-400">Boston Scientific (RNS)</td>
                                        <td class="px-4 py-3 text-sm text-gray-600 dark:text-gray-400">2,500</td>
                                        <td class="px-4 py-3 text-sm text-gray-600 dark:text-gray-400">$31,200</td>
                                        <td class="px-4 py-3 text-sm text-green-600 dark:text-green-400">+15.6%</td>
                                    </tr>
                                    <tr class="hover:bg-marcomm-gray dark:hover:bg-marcomm-dark transition-colors">
                                        <td class="px-4 py-3 text-sm font-medium">95812</td>
                                        <td class="px-4 py-3 text-sm text-gray-600 dark:text-gray-400">EEG monitoring 41-60 minutes</td>
                                        <td class="px-4 py-3 text-sm text-gray-600 dark:text-gray-400">Various</td>
                                        <td class="px-4 py-3 text-sm text-gray-600 dark:text-gray-400">35,400</td>
                                        <td class="px-4 py-3 text-sm text-gray-600 dark:text-gray-400">$420</td>
                                        <td class="px-4 py-3 text-sm text-green-600 dark:text-green-400">+5.3%</td>
                                    </tr>
                                    <tr class="hover:bg-marcomm-gray dark:hover:bg-marcomm-dark transition-colors">
                                        <td class="px-4 py-3 text-sm font-medium">95813</td>
                                        <td class="px-4 py-3 text-sm text-gray-600 dark:text-gray-400">EEG monitoring > 1 hour</td>
                                        <td class="px-4 py-3 text-sm text-gray-600 dark:text-gray-400">Various</td>
                                        <td class="px-4 py-3 text-sm text-gray-600 dark:text-gray-400">28,700</td>
                                        <td class="px-4 py-3 text-sm text-gray-600 dark:text-gray-400">$680</td>
                                        <td class="px-4 py-3 text-sm text-green-600 dark:text-green-400">+7.1%</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                    
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                        <div class="bg-white dark:bg-marcomm-gray-dark rounded-lg shadow-sm p-4">
                            <h4 class="text-lg font-semibold text-marcomm-dark dark:text-white mb-4">Medicare Spending by State (Top 10)</h4>
                            <canvas id="medicare-state-spending-chart" height="240"></canvas>
                        </div>
                        
                        <div class="bg-white dark:bg-marcomm-gray-dark rounded-lg shadow-sm p-4">
                            <h4 class="text-lg font-semibold text-marcomm-dark dark:text-white mb-4">Medicare Age Demographics</h4>
                            <div class="grid grid-cols-1 gap-4">
                                <div>
                                    <h5 class="text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Epilepsy Claims by Age Group</h5>
                                    <div class="relative pt-1">
                                        <div class="flex items-center justify-between">
                                            <div>
                                                <span class="text-xs font-semibold inline-block text-marcomm-blue">
                                                    Under 65 (Disability)
                                                </span>
                                            </div>
                                            <div>
                                                <span class="text-xs font-semibold inline-block text-marcomm-blue">
                                                    35%
                                                </span>
                                            </div>
                                        </div>
                                        <div class="overflow-hidden h-2 mb-4 text-xs flex rounded bg-blue-200">
                                            <div style="width:35%" class="shadow-none flex flex-col text-center whitespace-nowrap text-white justify-center bg-marcomm-blue"></div>
                                        </div>
                                    </div>
                                    <div class="relative pt-1">
                                        <div class="flex items-center justify-between">
                                            <div>
                                                <span class="text-xs font-semibold inline-block text-marcomm-orange">
                                                    65-74
                                                </span>
                                            </div>
                                            <div>
                                                <span class="text-xs font-semibold inline-block text-marcomm-orange">
                                                    28%
                                                </span>
                                            </div>
                                        </div>
                                        <div class="overflow-hidden h-2 mb-4 text-xs flex rounded bg-orange-200">
                                            <div style="width:28%" class="shadow-none flex flex-col text-center whitespace-nowrap text-white justify-center bg-marcomm-orange"></div>
                                        </div>
                                    </div>
                                    <div class="relative pt-1">
                                        <div class="flex items-center justify-between">
                                            <div>
                                                <span class="text-xs font-semibold inline-block text-marcomm-green">
                                                    75-84
                                                </span>
                                            </div>
                                            <div>
                                                <span class="text-xs font-semibold inline-block text-marcomm-green">
                                                    25%
                                                </span>
                                            </div>
                                        </div>
                                        <div class="overflow-hidden h-2 mb-4 text-xs flex rounded bg-green-200">
                                            <div style="width:25%" class="shadow-none flex flex-col text-center whitespace-nowrap text-white justify-center bg-marcomm-green"></div>
                                        </div>
                                    </div>
                                    <div class="relative pt-1">
                                        <div class="flex items-center justify-between">
                                            <div>
                                                <span class="text-xs font-semibold inline-block text-purple-500">
                                                    85+
                                                </span>
                                            </div>
                                            <div>
                                                <span class="text-xs font-semibold inline-block text-purple-500">
                                                    12%
                                                </span>
                                            </div>
                                        </div>
                                        <div class="overflow-hidden h-2 mb-4 text-xs flex rounded bg-purple-200">
                                            <div style="width:12%" class="shadow-none flex flex-col text-center whitespace-nowrap text-white justify-center bg-purple-500"></div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div>
                                    <h5 class="text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Device Utilization by Age</h5>
                                    <canvas id="device-age-chart" height="140"></canvas>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="bg-white dark:bg-marcomm-gray-dark rounded-lg shadow-sm p-4">
                        <h4 class="text-lg font-semibold text-marcomm-dark dark:text-white mb-4">5-Year Medicare Claims Trends</h4>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <h5 class="text-base font-medium mb-3">AED Claims Trend</h5>
                                <canvas id="aed-trend-5yr-chart" height="200"></canvas>
                            </div>
                            
                            <div>
                                <h5 class="text-base font-medium mb-3">Device Claims Trend</h5>
                                <canvas id="device-trend-5yr-chart" height="200"></canvas>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal -->
    <div id="detail-modal" class="hidden fixed inset-0 bg-gray-900 bg-opacity-75 flex items-center justify-center z-50">
        <div class="bg-white dark:bg-marcomm-gray-dark rounded-xl shadow-xl w-full max-w-3xl p-6">
            <div class="flex justify-between items-center mb-4">
                <h3 id="modal-title" class="text-xl font-semibold text-marcomm-dark dark:text-white"></h3>
                <button id="modal-close" class="text-gray-600 dark:text-gray-300 hover:text-marcomm-orange">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>
            </div>
            <div id="modal-content" class="modal-content text-gray-700 dark:text-gray-300"></div>
        </div>
    </div>

    <!-- Notifications Panel -->
    <div id="notifications-panel" class="hidden fixed inset-y-0 right-0 w-80 bg-white dark:bg-marcomm-gray-dark shadow-xl z-50 transform transition-transform duration-300 ease-in-out">
        <div class="p-4 border-b border-gray-200 dark:border-gray-700 flex justify-between items-center">
            <h3 class="text-lg font-semibold text-marcomm-dark dark:text-white">Notifications</h3>
            <button id="close-notifications" class="text-gray-600 dark:text-gray-300 hover:text-marcomm-orange">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                </svg>
            </button>
        </div>
        <div class="p-4 overflow-y-auto max-h-screen pb-32">
            <div class="space-y-4">
                <div class="p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg border-l-4 border-blue-500">
                    <div class="flex">
                        <div class="flex-shrink-0">
                            <i class="fas fa-newspaper text-blue-500"></i>
                        </div>
                        <div class="ml-3">
                            <p class="text-sm font-medium text-marcomm-dark dark:text-white">UCB Reports Q1 Results</p>
                            <p class="text-xs text-gray-600 dark:text-gray-400 mt-1">Keppra sales up 3.2% YoY, beating expectations</p>
                            <p class="text-xs text-gray-500 dark:text-gray-500 mt-2">1 hour ago</p>
                        </div>
                    </div>
                </div>
                
                <div class="p-3 bg-orange-50 dark:bg-orange-900/20 rounded-lg border-l-4 border-orange-500">
                    <div class="flex">
                        <div class="flex-shrink-0">
                            <i class="fas fa-flask text-orange-500"></i>
                        </div>
                        <div class="ml-3">
                            <p class="text-sm font-medium text-marcomm-dark dark:text-white">New Clinical Trial</p>
                            <p class="text-xs text-gray-600 dark:text-gray-400 mt-1">NeuroPace begins Phase III trial for next-gen RNS system</p>
                            <p class="text-xs text-gray-500 dark:text-gray-500 mt-2">5 hours ago</p>
                        </div>
                    </div>
                </div>
                
                <div class="p-3 bg-green-50 dark:bg-green-900/20 rounded-lg border-l-4 border-green-500">
                    <div class="flex">
                        <div class="flex-shrink-0">
                            <i class="fas fa-certificate text-green-500"></i>
                        </div>
                        <div class="ml-3">
                            <p class="text-sm font-medium text-marcomm-dark dark:text-white">FDA Approval</p>
                            <p class="text-xs text-gray-600 dark:text-gray-400 mt-1">Eisai's new pediatric formulation of Fycompa approved</p>
                            <p class="text-xs text-gray-500 dark:text-gray-500 mt-2">Yesterday</p>
                        </div>
                    </div>
                </div>
                
                <div class="p-3 bg-purple-50 dark:bg-purple-900/20 rounded-lg border-l-4 border-purple-500">
                    <div class="flex">
                        <div class="flex-shrink-0">
                            <i class="fas fa-chart-line text-purple-500"></i>
                        </div>
                        <div class="ml-3">
                            <p class="text-sm font-medium text-marcomm-dark dark:text-white">Market Alert</p>
                            <p class="text-xs text-gray-600 dark:text-gray-400 mt-1">Medtronic device market share increased to 40%</p>
                            <p class="text-xs text-gray-500 dark:text-gray-500 mt-2">2 days ago</p>
                        </div>
                    </div>
                </div>
                
                <div class="p-3 bg-gray-50 dark:bg-gray-800 rounded-lg border-l-4 border-gray-500">
                    <div class="flex">
                        <div class="flex-shrink-0">
                            <i class="fas fa-file-alt text-gray-500"></i>
                        </div>
                        <div class="ml-3">
                            <p class="text-sm font-medium text-marcomm-dark dark:text-white">Patent Filing</p>
                            <p class="text-xs text-gray-600 dark:text-gray-400 mt-1">BioSerenity files new patent for AI-powered seizure prediction</p>
                            <p class="text-xs text-gray-500 dark:text-gray-500 mt-2">3 days ago</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Dark/Light Toggle
        document.getElementById('dark-mode-toggle').addEventListener('click', () => {
            document.documentElement.classList.toggle('dark');
            localStorage.setItem('darkMode', document.documentElement.classList.contains('dark'));
        });
        // Check for saved dark mode preference
        if (localStorage.getItem('darkMode') === 'true') {
            document.documentElement.classList.add('dark');
        }

        // Tab Functionality
        document.querySelectorAll('.tab-button').forEach(button => {
            button.addEventListener('click', () => {
                const tabId = button.getAttribute('data-tab');
                // Hide all tab contents
                document.querySelectorAll('.tab-content').forEach(content => {
                    content.classList.add('hidden');
                });
                // Show selected tab content
                document.getElementById(tabId).classList.remove('hidden');
                
                // Update button styles
                document.querySelectorAll('.tab-button').forEach(btn => {
                    btn.classList.remove('text-marcomm-orange', 'border-marcomm-orange');
                    btn.classList.add('text-gray-500', 'border-transparent');
                });
                button.classList.add('text-marcomm-orange', 'border-marcomm-orange');
                button.classList.remove('text-gray-500', 'border-transparent');
            });
        });

        // Modal Functionality
        function showModal(title, content) {
            document.getElementById('modal-title').textContent = title;
            document.getElementById('modal-content').innerHTML = content;
            document.getElementById('detail-modal').classList.remove('hidden');
        }
        document.getElementById('modal-close').addEventListener('click', () => {
            document.getElementById('detail-modal').classList.add('hidden');
        });

        // Notifications Panel
        document.getElementById('notifications-btn').addEventListener('click', () => {
            document.getElementById('notifications-panel').classList.remove('hidden');
        });
        document.getElementById('close-notifications').addEventListener('click', () => {
            document.getElementById('notifications-panel').classList.add('hidden');
        });

        // Mock API Data
        const mockApi = {
            async getDrugCompetitors() {
                return {
                    metrics: [
                        { name: "UCB (Keppra)", revenue: 850000000, claims: 1200000, share: 35, adverseEvents: 3200, formulary: "Tier 1", growth: 4.2 },
                        { name: "GSK (Lamictal)", revenue: 620000000, claims: 900000, share: 25, adverseEvents: 2800, formulary: "Tier 2", growth: 2.8 },
                        { name: "Pfizer (Lyrica)", revenue: 450000000, claims: 700000, share: 18, adverseEvents: 1900, formulary: "Tier 1", growth: 1.5 },
                        { name: "Eisai (Fycompa)", revenue: 300000000, claims: 500000, share: 12, adverseEvents: 1500, formulary: "Tier 3", growth: 5.7 }
                    ],
                    fdaApprovals: [
                        { company: "UCB", drug: "Briviact", date: "2023-05-15", details: "Adjunctive therapy for partial-onset seizures", indications: "Partial-onset", approvalType: "NDA" },
                        { company: "GSK", drug: "Lamotrigine XR", date: "2024-02-10", details: "Extended-release formulation", indications: "Generalized", approvalType: "sNDA" },
                        { company: "Pfizer", drug: "Pregabalin Patch", date: "2024-08-01", details: "Topical delivery system", indications: "Neuropathic pain", approvalType: "NDA" },
                        { company: "Eisai", drug: "Fycompa Oral", date: "2023-11-20", details: "New pediatric formulation", indications: "Partial-onset", approvalType: "sNDA" }
                    ],
                    trends: {
                        years: ["2020", "2021", "2022", "2023", "2024"],
                        keppra: [900000, 950000, 1000000, 1100000, 1200000],
                        lamictal: [700000, 750000, 800000, 850000, 900000],
                        lyrica: [600000, 620000, 650000, 680000, 700000],
                        fycompa: [300000, 350000, 400000, 450000, 500000]
                    },
                    medicareSpending: {
                        years: ["2020", "2021", "2022", "2023", "2024"],
                        keppra: [32, 33.5, 35.2, 36.8, 38.5],
                        lamictal: [28, 29.2, 30.5, 31.8, 33.2],
                        lyrica: [25, 25.8, 26.5, 27.2, 28.0],
                        fycompa: [14, 15.2, 16.5, 18.0, 19.5]
                    }
                };
            },
            async getDeviceCompetitors() {
                return {
                    trends: {
                        years: ["2020", "2021", "2022", "2023", "2024"],
                        medtronic: [5000, 6000, 8000, 10000, 12000],
                        livanova: [4000, 5000, 7000, 8500, 10000],
                        boston: [1000, 1500, 2000, 3000, 4000]
                    },
                    outcomes: {
                        labels: ["1 Year", "2 Years", "3 Years", "5 Years"],
                        seizureReduction: {
                            dbs: [30, 40, 45, 48],
                            vns: [25, 35, 38, 42],
                            rns: [35, 45, 50, 55]
                        }
                    }
                };
            },
            async getMarketOverview() {
                return {
                    share: {
                        labels: ["Drugs", "Devices", "Diagnostics", "Other"],
                        values: [70, 20, 7, 3]
                    },
                    trends: {
                        years: ["2020", "2021", "2022", "2023", "2024"],
                        marketSize: [2.8, 2.9, 3.1, 3.3, 3.5]
                    },
                    regional: {
                        labels: ["North America", "Europe", "Asia Pacific", "Rest of World"],
                        values: [45, 30, 20, 5]
                    },
                    forecast: {
                        years: ["2025", "2026", "2027", "2028", "2029", "2030"],
                        values: [3.7, 4.0, 4.3, 4.6, 5.0, 5.3]
                    }
                };
            },
            async getPatientTracking() {
                return {
                    efficacy: {
                        years: ["2020", "2021", "2022", "2023", "2024"],
                        keppra: [80, 82, 85, 87, 85],
                        lamictal: [75, 76, 78, 80, 79],
                        fycompa: [70, 72, 75, 77, 76]
                    },
                    pathways: {
                        labels: ["AED Monotherapy", "AED Polytherapy", "AED + Device", "Surgical"],
                        newlyDiagnosed: [70, 20, 5, 5],
                        refractory: [10, 55, 25, 10]
                    },
                    refractoryTime: {
                        labels: ["Within 1 Year", "1-2 Years", "2-3 Years", "3-5 Years", "5+ Years"],
                        values: [10, 25, 35, 20, 10]
                    }
                };
            },
            async getMedicareClaims() {
                return {
                    aedClaims: {
                        drugs: ["Keppra", "Lamictal", "Lyrica", "Fycompa", "Other AEDs"],
                        claims: [102000, 85000, 40000, 15000, 25842],
                    },
                    deviceClaims: {
                        companies: ["Medtronic", "Livanova", "Boston Scientific"],
                        claims: [8000, 6000, 2500]
                    },
                    stateSpending: {
                        states: ["CA", "TX", "FL", "NY", "IL", "PA", "OH", "MI", "GA", "NC"],
                        spending: [42.5, 38.2, 35.4, 32.1, 28.5, 25.8, 22.6, 21.4, 19.8, 18.9]
                    },
                    trends: {
                        years: ["2020", "2021", "2022", "2023", "2024"],
                        aed: [210000, 225000, 235000, 252000, 267842],
                        device: [9800, 11500, 13200, 15000, 16500]
                    },
                    deviceAge: {
                        labels: ["Under 65", "65-74", "75-84", "85+"],
                        dbs: [45, 32, 18, 5],
                        vns: [40, 35, 20, 5],
                        rns: [50, 30, 15, 5]
                    }
                };
            }
        };

        // Initialize charts
        async function initCharts() {
            const drugData = await mockApi.getDrugCompetitors();
            const deviceData = await mockApi.getDeviceCompetitors();
            const marketData = await mockApi.getMarketOverview();
            const patientData = await mockApi.getPatientTracking();
            const medicareData = await mockApi.getMedicareClaims();
            
            // AED Trend Chart
            new Chart(document.getElementById('aed-trend-chart'), {
                type: 'line',
                data: {
                    labels: drugData.trends.years,
                    datasets: [
                        { label: 'Keppra', data: drugData.trends.keppra, borderColor: '#FF6B35', backgroundColor: 'rgba(255, 107, 53, 0.1)', tension: 0.1, fill: true },
                        { label: 'Lamictal', data: drugData.trends.lamictal, borderColor: '#3B82F6', backgroundColor: 'rgba(59, 130, 246, 0.1)', tension: 0.1, fill: true },
                        { label: 'Lyrica', data: drugData.trends.lyrica, borderColor: '#10B981', backgroundColor: 'rgba(16, 185, 129, 0.1)', tension: 0.1, fill: true },
                        { label: 'Fycompa', data: drugData.trends.fycompa, borderColor: '#F59E0B', backgroundColor: 'rgba(245, 158, 11, 0.1)', tension: 0.1, fill: true }
                    ]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            position: 'top',
                        },
                        tooltip: {
                            mode: 'index',
                            intersect: false,
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'Prescriptions'
                            },
                            ticks: {
                                callback: function(value) {
                                    return value.toLocaleString();
                                }
                            }
                        }
                    }
                }
            });
            
            // AED Medicare Spending Chart
            new Chart(document.getElementById('aed-medicare-spending'), {
                type: 'bar',
                data: {
                    labels: drugData.medicareSpending.years,
                    datasets: [
                        { label: 'Keppra', data: drugData.medicareSpending.keppra, backgroundColor: '#FF6B35' },
                        { label: 'Lamictal', data: drugData.medicareSpending.lamictal, backgroundColor: '#3B82F6' },
                        { label: 'Lyrica', data: drugData.medicareSpending.lyrica, backgroundColor: '#10B981' },
                        { label: 'Fycompa', data: drugData.medicareSpending.fycompa, backgroundColor: '#F59E0B' }
                    ]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            position: 'top',
                        },
                        tooltip: {
                            mode: 'index',
                            intersect: false,
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'Medicare Spending ($ Millions)'
                            }
                        }
                    }
                }
            });

            // Device Trend Chart
            new Chart(document.getElementById('device-trend-chart'), {
                type: 'line',
                data: {
                    labels: deviceData.trends.years,
                    datasets: [
                        { label: 'Medtronic', data: deviceData.trends.medtronic, borderColor: '#FF6B35', tension: 0.1 },
                        { label: 'Livanova', data: deviceData.trends.livanova, borderColor: '#3B82F6', tension: 0.1 },
                        { label: 'Boston Scientific', data: deviceData.trends.boston, borderColor: '#10B981', tension: 0.1 }
                    ]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            position: 'top',
                        },
                        tooltip: {
                            mode: 'index',
                            intersect: false,
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'Implants'
                            },
                            ticks: {
                                callback: function(value) {
                                    return value.toLocaleString();
                                }
                            }
                        }
                    }
                }
            });
            
            // Device Outcomes Chart
            new Chart(document.getElementById('device-outcomes-chart'), {
                type: 'line',
                data: {
                    labels: deviceData.outcomes.labels,
                    datasets: [
                        { label: 'DBS (Medtronic)', data: deviceData.outcomes.seizureReduction.dbs, borderColor: '#FF6B35', tension: 0.1, fill: false },
                        { label: 'VNS (Livanova)', data: deviceData.outcomes.seizureReduction.vns, borderColor: '#3B82F6', tension: 0.1, fill: false },
                        { label: 'RNS (Boston Scientific)', data: deviceData.outcomes.seizureReduction.rns, borderColor: '#10B981', tension: 0.1, fill: false }
                    ]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            position: 'top',
                        },
                        tooltip: {
                            mode: 'index',
                            intersect: false,
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'Average Seizure Reduction (%)'
                            },
                            max: 70
                        }
                    }
                }
            });

            // Patent Activity Chart
            new Chart(document.getElementById('patent-activity-chart'), {
                type: 'line',
                data: {
                    labels: ['2020', '2021', '2022', '2023', '2024'],
                    datasets: [
                        { label: 'NeuroPace', data: [3, 4, 2, 4, 2], borderColor: '#FF6B35', tension: 0.1 },
                        { label: 'EpiHunter', data: [1, 2, 2, 2, 1], borderColor: '#3B82F6', tension: 0.1 },
                        { label: 'Ceribell', data: [2, 3, 2, 3, 2], borderColor: '#10B981', tension: 0.1 },
                        { label: 'BioSerenity', data: [1, 2, 3, 2, 2], borderColor: '#F59E0B', tension: 0.1 }
                    ]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            position: 'top',
                        },
                        tooltip: {
                            mode: 'index',
                            intersect: false,
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'Patents Filed'
                            },
                            ticks: {
                                precision: 0
                            }
                        }
                    }
                }
            });

            // Market Share Chart
            new Chart(document.getElementById('market-share-chart'), {
                type: 'pie',
                data: {
                    labels: marketData.share.labels,
                    datasets: [{
                        data: marketData.share.values,
                        backgroundColor: ['#FF6B35', '#3B82F6', '#10B981', '#A0AEC0']
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            position: 'bottom'
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return `${context.label}: ${context.raw}%`;
                                }
                            }
                        }
                    }
                }
            });

            // Market Trend Chart
            new Chart(document.getElementById('market-trend-chart'), {
                type: 'line',
                data: {
                    labels: marketData.trends.years,
                    datasets: [
                        { 
                            label: 'Market Size ($B)', 
                            data: marketData.trends.marketSize, 
                            borderColor: '#FF6B35', 
                            backgroundColor: 'rgba(255, 107, 53, 0.1)',
                            tension: 0.1,
                            fill: true
                        }
                    ]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            position: 'top',
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: false,
                            title: {
                                display: true,
                                text: 'Size ($B)'
                            }
                        }
                    }
                }
            });
            
            // Regional Distribution Chart
            new Chart(document.getElementById('regional-distribution-chart'), {
                type: 'doughnut',
                data: {
                    labels: marketData.regional.labels,
                    datasets: [{
                        data: marketData.regional.values,
                        backgroundColor: ['#FF6B35', '#3B82F6', '#10B981', '#A0AEC0']
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            position: 'bottom'
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return `${context.label}: ${context.raw}%`;
                                }
                            }
                        }
                    }
                }
            });
            
            // Epilepsy Type Chart
            new Chart(document.getElementById('epilepsy-type-chart'), {
                type: 'polarArea',
                data: {
                    labels: ['Focal Onset', 'Generalized Onset', 'Unknown Onset', 'Combined/Other'],
                    datasets: [{
                        data: [60, 30, 7, 3],
                        backgroundColor: [
                            'rgba(255, 107, 53, 0.7)',
                            'rgba(59, 130, 246, 0.7)',
                            'rgba(16, 185, 129, 0.7)',
                            'rgba(160, 174, 192, 0.7)'
                        ]
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            position: 'bottom'
                        }
                    }
                }
            });
            
            // Market Forecast Chart
            new Chart(document.getElementById('market-forecast-chart'), {
                type: 'bar',
                data: {
                    labels: marketData.forecast.years,
                    datasets: [{
                        label: 'Projected Market Size ($B)',
                        data: marketData.forecast.values,
                        backgroundColor: 'rgba(16, 185, 129, 0.7)',
                        borderColor: '#10B981',
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return `$${context.raw}B`;
                                }
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: false,
                            min: 3.0,
                            title: {
                                display: true,
                                text: 'Projected Size ($B)'
                            }
                        }
                    }
                }
            });

            // AED Efficacy Chart
            new Chart(document.getElementById('aed-efficacy-chart'), {
                type: 'line',
                data: {
                    labels: patientData.efficacy.years,
                    datasets: [
                        { label: 'Keppra', data: patientData.efficacy.keppra, borderColor: '#FF6B35', tension: 0.1 },
                        { label: 'Lamictal', data: patientData.efficacy.lamictal, borderColor: '#3B82F6', tension: 0.1 },
                        { label: 'Fycompa', data: patientData.efficacy.fycompa, borderColor: '#10B981', tension: 0.1 }
                    ]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            position: 'top',
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: false,
                            min: 60,
                            max: 100,
                            title: {
                                display: true,
                                text: 'Efficacy (%)'
                            }
                        }
                    }
                }
            });
            
            // Treatment Pathways Chart
            new Chart(document.getElementById('treatment-pathways-chart'), {
                type: 'radar',
                data: {
                    labels: patientData.pathways.labels,
                    datasets: [
                        {
                            label: 'Newly Diagnosed',
                            data: patientData.pathways.newlyDiagnosed,
                            backgroundColor: 'rgba(255, 107, 53, 0.2)',
                            borderColor: '#FF6B35',
                            pointBackgroundColor: '#FF6B35'
                        },
                        {
                            label: 'Refractory Patients',
                            data: patientData.pathways.refractory,
                            backgroundColor: 'rgba(59, 130, 246, 0.2)',
                            borderColor: '#3B82F6',
                            pointBackgroundColor: '#3B82F6'
                        }
                    ]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            position: 'top',
                        }
                    },
                    scales: {
                        r: {
                            angleLines: {
                                display: true
                            },
                            suggestedMin: 0,
                            suggestedMax: 80
                        }
                    }
                }
            });
            
            // Refractory Time Chart
            new Chart(document.getElementById('refractory-time-chart'), {
                type: 'bar',
                data: {
                    labels: patientData.refractoryTime.labels,
                    datasets: [{
                        label: 'Percentage of Patients',
                        data: patientData.refractoryTime.values,
                        backgroundColor: [
                            'rgba(255, 107, 53, 0.7)',
                            'rgba(59, 130, 246, 0.7)',
                            'rgba(16, 185, 129, 0.7)',
                            'rgba(245, 158, 11, 0.7)',
                            'rgba(160, 174, 192, 0.7)'
                        ]
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            display: false
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return `${context.raw}% of patients`;
                                }
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'Percentage of Patients'
                            },
                            ticks: {
                                callback: function(value) {
                                    return value + '%';
                                }
                            }
                        }
                    }
                }
            });
            
            // Medicare AED Claims Chart
            new Chart(document.getElementById('medicare-aed-claims-chart'), {
                type: 'bar',
                data: {
                    labels: medicareData.aedClaims.drugs,
                    datasets: [{
                        label: '2024 Claims',
                        data: medicareData.aedClaims.claims,
                        backgroundColor: [
                            'rgba(255, 107, 53, 0.7)',
                            'rgba(59, 130, 246, 0.7)',
                            'rgba(16, 185, 129, 0.7)',
                            'rgba(245, 158, 11, 0.7)',
                            'rgba(160, 174, 192, 0.7)'
                        ],
                        borderColor: [
                            '#FF6B35',
                            '#3B82F6',
                            '#10B981',
                            '#F59E0B',
                            '#A0AEC0'
                        ],
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            display: false
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return `${context.raw.toLocaleString()} claims`;
                                }
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'Number of Claims'
                            },
                            ticks: {
                                callback: function(value) {
                                    return value.toLocaleString();
                                }
                            }
                        }
                    }
                }
            });
            
            // Medicare Device Claims Chart
            new Chart(document.getElementById('medicare-device-claims-chart'), {
                type: 'horizontalBar',
                type: 'bar',
                data: {
                    labels: medicareData.deviceClaims.companies,
                    datasets: [{
                        label: '2024 Procedure Claims',
                        data: medicareData.deviceClaims.claims,
                        backgroundColor: [
                            'rgba(255, 107, 53, 0.7)',
                            'rgba(59, 130, 246, 0.7)',
                            'rgba(16, 185, 129, 0.7)'
                        ],
                        borderColor: [
                            '#FF6B35',
                            '#3B82F6',
                            '#10B981'
                        ],
                        borderWidth: 1
                    }]
                },
                options: {
                    indexAxis: 'y',
                    responsive: true,
                    plugins: {
                        legend: {
                            display: false
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return `${context.raw.toLocaleString()} claims`;
                                }
                            }
                        }
                    },
                    scales: {
                        x: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'Number of Claims'
                            },
                            ticks: {
                                callback: function(value) {
                                    return value.toLocaleString();
                                }
                            }
                        }
                    }
                }
            });
            
            // Medicare State Spending Chart
            new Chart(document.getElementById('medicare-state-spending-chart'), {
                type: 'bar',
                data: {
                    labels: medicareData.stateSpending.states,
                    datasets: [{
                        label: '2024 Medicare Spending ($ Millions)',
                        data: medicareData.stateSpending.spending,
                        backgroundColor: 'rgba(59, 130, 246, 0.7)',
                        borderColor: '#3B82F6',
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            display: false
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return `$${context.raw.toLocaleString()} million`;
                                }
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'Spending ($ Millions)'
                            }
                        }
                    }
                }
            });
            
            // Device Age Chart
            new Chart(document.getElementById('device-age-chart'), {
                type: 'bar',
                data: {
                    labels: medicareData.deviceAge.labels,
                    datasets: [
                        {
                            label: 'DBS',
                            data: medicareData.deviceAge.dbs,
                            backgroundColor: 'rgba(255, 107, 53, 0.7)',
                            borderColor: '#FF6B35',
                            borderWidth: 1
                        },
                        {
                            label: 'VNS',
                            data: medicareData.deviceAge.vns,
                            backgroundColor: 'rgba(59, 130, 246, 0.7)',
                            borderColor: '#3B82F6',
                            borderWidth: 1
                        },
                        {
                            label: 'RNS',
                            data: medicareData.deviceAge.rns,
                            backgroundColor: 'rgba(16, 185, 129, 0.7)',
                            borderColor: '#10B981',
                            borderWidth: 1
                        }
                    ]
                },
                options: {
                    responsive: true,
                    plugins: {
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return `${context.dataset.label}: ${context.raw}%`;
                                }
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'Percentage of Patients'
                            },
                            ticks: {
                                callback: function(value) {
                                    return value + '%';
                                }
                            }
                        }
                    }
                }
            });
            
            // 5-Year AED Claims Trend
            new Chart(document.getElementById('aed-trend-5yr-chart'), {
                type: 'line',
                data: {
                    labels: medicareData.trends.years,
                    datasets: [{
                        label: 'Medicare AED Claims',
                        data: medicareData.trends.aed,
                        borderColor: '#3B82F6',
                        backgroundColor: 'rgba(59, 130, 246, 0.1)',
                        tension: 0.1,
                        fill: true
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            display: false
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return `${context.raw.toLocaleString()} claims`;
                                }
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: false,
                            title: {
                                display: true,
                                text: 'Number of Claims'
                            },
                            ticks: {
                                callback: function(value) {
                                    return value.toLocaleString();
                                }
                            }
                        }
                    }
                }
            });
            
            // 5-Year Device Claims Trend
            new Chart(document.getElementById('device-trend-5yr-chart'), {
                type: 'line',
                data: {
                    labels: medicareData.trends.years,
                    datasets: [{
                        label: 'Medicare Device Claims',
                        data: medicareData.trends.device,
                        borderColor: '#10B981',
                        backgroundColor: 'rgba(16, 185, 129, 0.1)',
                        tension: 0.1,
                        fill: true
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            display: false
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return `${context.raw.toLocaleString()} claims`;
                                }
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: false,
                            title: {
                                display: true,
                                text: 'Number of Claims'
                            },
                            ticks: {
                                callback: function(value) {
                                    return value.toLocaleString();
                                }
                            }
                        }
                    }
                }
            });
        }

        // Initialize Drug Competitors Tab
        async function loadDrugCompetitors() {
            const data = await mockApi.getDrugCompetitors();
            const metricsDiv = document.getElementById('drug-metrics');
            
            metricsDiv.innerHTML = data.metrics.map(m => `
                <div class="bg-white dark:bg-marcomm-gray-dark rounded-lg shadow-sm p-4 border border-gray-200 dark:border-marcomm-dark hover:shadow-md transition-shadow">
                    <div class="flex justify-between">
                        <div>
                            <h4 class="font-semibold text-marcomm-dark dark:text-white">${m.name}</h4>
                            <p class="text-xl font-medium text-marcomm-orange mt-1">$${m.revenue.toLocaleString()}</p>
                        </div>
                        <div class="w-12 h-12 bg-gray-100 dark:bg-gray-700 rounded-full flex items-center justify-center">
                            <i class="fas fa-pills text-marcomm-orange text-xl"></i>
                        </div>
                    </div>
                    <div class="mt-4 grid grid-cols-2 gap-2">
                        <div>
                            <p class="text-xs text-gray-500 dark:text-gray-400">Claims</p>
                            <p class="text-sm font-medium">${m.claims.toLocaleString()}</p>
                        </div>
                        <div>
                            <p class="text-xs text-gray-500 dark:text-gray-400">Market Share</p>
                            <p class="text-sm font-medium">${m.share}%</p>
                        </div>
                        <div>
                            <p class="text-xs text-gray-500 dark:text-gray-400">YoY Growth</p>
                            <p class="text-sm font-medium text-green-600">+${m.growth}%</p>
                        </div>
                        <div>
                            <p class="text-xs text-gray-500 dark:text-gray-400">Formulary</p>
                            <p class="text-sm font-medium">${m.formulary}</p>
                        </div>
                    </div>
                    <div class="mt-4">
                        <a href="#" class="text-marcomm-blue text-sm hover:underline">View Full Profile</a>
                    </div>
                </div>
            `).join('');

            let page = 1;
            const perPage = 2;
            function updateFdaTable() {
                const tableBody = document.getElementById('drug-fda-table');
                const paginated = data.fdaApprovals.slice((page - 1) * perPage, page * perPage);
                
                tableBody.innerHTML = paginated.map(a => `
                    <tr class="hover:bg-marcomm-gray dark:hover:bg-marcomm-dark transition-colors">
                        <td class="px-4 py-3 text-sm text-gray-600 dark:text-gray-400">${a.company}</td>
                        <td class="px-4 py-3 text-sm text-gray-600 dark:text-gray-400">${a.drug}</td>
                        <td class="px-4 py-3 text-sm text-gray-600 dark:text-gray-400">${a.date}</td>
                        <td class="px-4 py-3 text-sm">
                            <button class="text-marcomm-orange hover:underline" onclick="showModal('${a.drug} Details', '<p><strong>Indications:</strong> ${a.indications}</p><p><strong>Type:</strong> ${a.approvalType}</p><p>${a.details}</p>')">View</button>
                        </td>
                    </tr>
                `).join('');
            }
            
            updateFdaTable();
            
            document.getElementById('drug-fda-prev').addEventListener('click', () => {
                if (page > 1) {
                    page--;
                    updateFdaTable();
                }
            });
            
            document.getElementById('drug-fda-next').addEventListener('click', () => {
                if (page * perPage < data.fdaApprovals.length) {
                    page++;
                    updateFdaTable();
                }
            });
        }

        // Create Patient Journey Flow Diagram using D3.js Sankey
        function createPatientJourneyDiagram() {
            // This is a simplified version of the patient journey flow
            const diagram = document.getElementById('patient-journey-diagram');
            
            // Set up SVG and dimensions
            const width = diagram.offsetWidth;
            const height = diagram.offsetHeight;
            
            // Clear previous content
            diagram.innerHTML = '';
            
            // Create SVG
            const svg = d3.select(diagram)
                .append('svg')
                .attr('width', width)
                .attr('height', height)
                .append('g')
                .attr('transform', 'translate(0,0)');
                
            // Define the stages and their horizontal positions
            const stages = [
                { id: 'diagnosis', label: 'Initial Diagnosis', x: width * 0.05, y: height * 0.5 },
                { id: 'firstline', label: 'First Line AED', x: width * 0.25, y: height * 0.3 },
                { id: 'controlled', label: 'Seizure Controlled', x: width * 0.45, y: height * 0.2 },
                { id: 'refractory', label: 'Refractory Epilepsy', x: width * 0.45, y: height * 0.6 },
                { id: 'additional', label: 'Additional AEDs', x: width * 0.65, y: height * 0.5 },
                { id: 'devices', label: 'Device Therapy', x: width * 0.65, y: height * 0.8 },
                { id: 'surgery', label: 'Surgical Evaluation', x: width * 0.85, y: height * 0.65 }
            ];
            
            // Define the flows between stages
            const flows = [
                { source: 'diagnosis', target: 'firstline', value: 100 },
                { source: 'firstline', target: 'controlled', value: 70 },
                { source: 'firstline', target: 'refractory', value: 30 },
                { source: 'refractory', target: 'additional', value: 20 },
                { source: 'refractory', target: 'devices', value: 8 },
                { source: 'devices', target: 'surgery', value: 3 }
            ];
            
            // Draw the nodes (stages)
            svg.selectAll('.node')
                .data(stages)
                .enter()
                .append('g')
                .attr('class', 'node')
                .attr('transform', d => `translate(${d.x},${d.y})`)
                .each(function(d) {
                    // Node background
                    const color = d.id === 'diagnosis' ? '#FF6B35' : 
                                 d.id === 'controlled' ? '#10B981' : 
                                 d.id === 'refractory' ? '#EF4444' : '#3B82F6';
                    
                    d3.select(this)
                        .append('rect')
                        .attr('width', 100)
                        .attr('height', 40)
                        .attr('x', -50)
                        .attr('y', -20)
                        .attr('rx', 5)
                        .attr('ry', 5)
                        .attr('fill', color)
                        .attr('fill-opacity', 0.7);
                    
                    // Node label
                    d3.select(this)
                        .append('text')
                        .attr('text-anchor', 'middle')
                        .attr('dy', 5)
                        .attr('fill', 'white')
                        .attr('font-size', '12px')
                        .text(d.label);
                });
                
            // Draw the links (flows)
            svg.selectAll('.link')
                .data(flows)
                .enter()
                .append('path')
                .attr('class', 'link')
                .attr('d', function(d) {
                    const source = stages.find(s => s.id === d.source);
                    const target = stages.find(s => s.id === d.target);
                    
                    // Simple curved path
                    return `M${source.x+50},${source.y} C${(source.x+target.x)/2},${source.y} ${(source.x+target.x)/2},${target.y} ${target.x-50},${target.y}`;
                })
                .attr('stroke', '#A0AEC0')
                .attr('stroke-width', d => Math.max(1, d.value / 10))
                .attr('fill', 'none')
                .attr('stroke-opacity', 0.5);
                
            // Add flow values
            svg.selectAll('.flow-value')
                .data(flows)
                .enter()
                .append('text')
                .attr('class', 'flow-value')
                .attr('x', function(d) {
                    const source = stages.find(s => s.id === d.source);
                    const target = stages.find(s => s.id === d.target);
                    return (source.x + target.x) / 2;
                })
                .attr('y', function(d) {
                    const source = stages.find(s => s.id === d.source);
                    const target = stages.find(s => s.id === d.target);
                    return (source.y + target.y) / 2 - 10;
                })
                .attr('text-anchor', 'middle')
                .attr('font-size', '10px')
                .attr('fill', '#4A5568')
                .text(d => `${d.value}%`);
        }

        // Create Referral Sankey Diagram
        function createReferralSankeyDiagram() {
            const diagram = document.getElementById('referral-sankey-diagram');
            
            // Set up dimensions
            const width = diagram.offsetWidth;
            const height = diagram.offsetHeight;
            
            // Clear previous content
            diagram.innerHTML = '';
            
            // Define data for a simplified referral flow
            const nodes = [
                { id: 'primary', name: 'Primary Care', level: 0 },
                { id: 'neuro', name: 'Neurologist', level: 1 },
                { id: 'epileptologist', name: 'Epileptologist', level: 2 },
                { id: 'device', name: 'Device Specialist', level: 3 },
                { id: 'surgery', name: 'Surgical Evaluation', level: 3 }
            ];
            
            const links = [
                { source: 'primary', target: 'neuro', value: 100 },
                { source: 'neuro', target: 'epileptologist', value: 30 },
                { source: 'epileptologist', target: 'device', value: 15 },
                { source: 'epileptologist', target: 'surgery', value: 12 }
            ];
            
            // Create SVG
            const svg = d3.select(diagram)
                .append('svg')
                .attr('width', width)
                .attr('height', height)
                .append('g')
                .attr('transform', 'translate(20,20)');
            
            // Calculate horizontal positions based on levels
            const levelWidth = (width - 40) / 3;
            nodes.forEach(node => {
                node.x = node.level * levelWidth;
                // Spread nodes in the same level vertically
                const nodesAtSameLevel = nodes.filter(n => n.level === node.level).length;
                const indexAtLevel = nodes.filter(n => n.level === node.level && n.id < node.id).length;
                node.y = (height - 40) * (indexAtLevel + 0.5) / nodesAtSameLevel;
            });
            
            // Draw links
            svg.selectAll('.link')
                .data(links)
                .enter()
                .append('path')
                .attr('class', 'link')
                .attr('d', d => {
                    const source = nodes.find(n => n.id === d.source);
                    const target = nodes.find(n => n.id === d.target);
                    
                    // Create a curved path
                    return `M${source.x + 60},${source.y} C${source.x + levelWidth/2},${source.y} ${target.x - levelWidth/2},${target.y} ${target.x},${target.y}`;
                })
                .attr('stroke', '#A0AEC0')
                .attr('stroke-width', d => Math.max(2, d.value / 7))
                .attr('fill', 'none')
                .attr('stroke-opacity', 0.5);
                
            // Draw nodes
            svg.selectAll('.node')
                .data(nodes)
                .enter()
                .append('g')
                .attr('class', 'node')
                .attr('transform', d => `translate(${d.x},${d.y})`)
                .each(function(d) {
                    // Define colors based on node type
                    const colors = {
                        'primary': '#3B82F6',
                        'neuro': '#10B981',
                        'epileptologist': '#FF6B35',
                        'device': '#8B5CF6',
                        'surgery': '#F59E0B'
                    };
                    
                    // Node rectangle
                    d3.select(this)
                        .append('rect')
                        .attr('width', 120)
                        .attr('height', 40)
                        .attr('x', 0)
                        .attr('y', -20)
                        .attr('rx', 5)
                        .attr('ry', 5)
                        .attr('fill', colors[d.id])
                        .attr('fill-opacity', 0.7);
                        
                    // Node label    
                    d3.select(this)
                        .append('text')
                        .attr('text-anchor', 'middle')
                        .attr('x', 60)
                        .attr('dy', 5)
                        .attr('fill', 'white')
                        .attr('font-size', '12px')
                        .text(d.name);
                });
                
            // Add flow values
            svg.selectAll('.flow-value')
                .data(links)
                .enter()
                .append('text')
                .attr('class', 'flow-value')
                .attr('x', function(d) {
                    const source = nodes.find(n => n.id === d.source);
                    const target = nodes.find(n => n.id === d.target);
                    return (source.x + 60 + target.x) / 2;
                })
                .attr('y', function(d) {
                    const source = nodes.find(n => n.id === d.source);
                    const target = nodes.find(n => n.id === d.target);
                    return (source.y + target.y) / 2 - 10;
                })
                .attr('text-anchor', 'middle')
                .attr('font-size', '11px')
                .attr('fill', '#4A5568')
                .text(d => `${d.value}%`);
        }

        // Initialize application
        document.addEventListener('DOMContentLoaded', async () => {
            // Load data and populate sections
            loadDrugCompetitors();
            
            // Initialize charts
            await initCharts();
            
            // Create D3.js diagrams
            createPatientJourneyDiagram();
            createReferralSankeyDiagram();
            
            // Window resize handler for responsive diagrams
            window.addEventListener('resize', () => {
                createPatientJourneyDiagram();
                createReferralSankeyDiagram();
            });
            
            // Filter application handlers
            document.getElementById('apply-filters').addEventListener('click', () => {
                // In a real application, this would update data based on selected filters
                const filterSelects = document.querySelectorAll('.filter-select');
                const filters = {};
                
                filterSelects.forEach(select => {
                    const filterName = select.previousElementSibling.textContent;
                    filters[filterName] = select.value;
                });
                
                console.log('Applied filters:', filters);
                // Reload data with filters
                loadDrugCompetitors();
                initCharts();
            });
            
            document.getElementById('reset-filters').addEventListener('click', () => {
                document.querySelectorAll('.filter-select').forEach(select => {
                    select.selectedIndex = 0;
                });
            });
            
            // Download report functionality
            document.getElementById('download-report').addEventListener('click', () => {
                alert('Report export functionality would be implemented here.');
                // In a real application, this would generate a PDF or Excel report
            });
        });
    </script>
</body>
</html>